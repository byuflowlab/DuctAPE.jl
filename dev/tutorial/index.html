<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quick Start · DuctTAPE.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://flow.byu.edu/DuctTAPE.jl/tutorial/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DuctTAPE.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Intro</a></li><li class="is-active"><a class="tocitem" href>Quick Start</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-Duct-Geometry"><span>Setting up Duct Geometry</span></a></li><li><a class="tocitem" href="#Defining-Rotors"><span>Defining Rotors</span></a></li><li><a class="tocitem" href="#Wake-Grid-Initialization"><span>Wake Grid Initialization</span></a></li><li><a class="tocitem" href="#System-Paneling"><span>System Paneling</span></a></li><li><a class="tocitem" href="#Initializing-Rotor-Aerodynamics"><span>Initializing Rotor Aerodynamics</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Guided Examples</a></li><li><a class="tocitem" href="../reference/">API Reference</a></li><li><a class="tocitem" href="../theory/">Theory</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quick Start</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quick Start</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/main/docs/src/tutorial.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Quick-Start-Guide"><a class="docs-heading-anchor" href="#Quick-Start-Guide">Quick Start Guide</a><a id="Quick-Start-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Start-Guide" title="Permalink"></a></h1><h2 id="Setting-up-Duct-Geometry"><a class="docs-heading-anchor" href="#Setting-up-Duct-Geometry">Setting up Duct Geometry</a><a id="Setting-up-Duct-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-Duct-Geometry" title="Permalink"></a></h2><p>For this example, we are going to set up an example available in the DFDC source files. We have taken one of the case files and transcribed it into a julia file located in the <a href="../../../data/dfdc/dstestr2_case.jl">data directory</a>.</p><p>We&#39;ll go ahead and load that file and grab pieces of it as we go.</p><pre><code class="language-julia hljs"># --- WALL GEOMETRY DEFINITION
include(&quot;../../data/dfdc/dstestr2_case.jl&quot;);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">DFDC Example Case Information Loaded</code></pre><p>The geometry is defined for a complete airfoil as the duct wall. We actually want to split the duct wall coordinates for easier navigation as we set up the flow field.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.split_wall" href="#DuctTAPE.split_wall"><code>DuctTAPE.split_wall</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">split_wall(x,r)</code></pre><p>Splits full airfoil coordinates into upper and lower halves.</p><p>Only works based on geometry.  Splits at lowest x-value, does not split based on stagnation point.</p><p><strong>Arguments:</strong></p><ul><li><code>x::Array{Float}</code> : Array of x-coordinates, assumed to start at the bottom trailing edge and proceed clockwise</li><li><code>r::Array{Float}</code> : Array of r-coordinates, assumed to start at the bottom trailing edge and proceed clockwise</li></ul><p><strong>Returns:</strong></p><ul><li><code>xlower::Array{Float}</code> : Array of lower x-coordinates</li><li><code>xupper::Array{Float}</code> : Array of upper x-coordinates</li><li><code>rlower::Array{Float}</code> : Array of lower r-coordinates</li><li><code>rupper::Array{Float}</code> : Array of upper r-coordinates</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/utils.jl#L129-L145">source</a></section></article><pre><code class="language-julia hljs"># - Split Wall Coordinates
outerwallx, innerwallx, outerwallr, innerwallr = DuctTAPE.split_wall(ductx, ductr)

# - Plot Geometry
plot!(innerwallx, innerwallr, linewidth=2)
plot!(outerwallx, outerwallr, linestyle=:dash, color=1, linewidth=2)
plot!(hubx, hubr, color=2, linewidth=2)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="600" viewBox="0 0 3200 2400">
<defs>
  <clipPath id="clip430">
    <rect x="0" y="0" width="3200" height="2400"/>
  </clipPath>
</defs>
<path clip-path="url(#clip430)" d="
M0 2400 L3200 2400 L3200 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip431">
    <rect x="640" y="0" width="2241" height="2241"/>
  </clipPath>
</defs>
<path clip-path="url(#clip430)" d="
M252.472 2155.53 L3011.02 2155.53 L3011.02 188.976 L252.472 188.976  Z
  " fill="#000000" fill-rule="evenodd" fill-opacity="0"/>
<defs>
  <clipPath id="clip432">
    <rect x="252" y="188" width="2760" height="1968"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,2155.53 3011.02,2155.53 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  330.545,2155.53 330.545,2136.63 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1179.95,2155.53 1179.95,2136.63 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2029.36,2155.53 2029.36,2136.63 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2878.77,2155.53 2878.77,2136.63 
  "/>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 330.545, 2225.92)" x="330.545" y="2225.92">0.0</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 1179.95, 2225.92)" x="1179.95" y="2225.92">0.1</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 2029.36, 2225.92)" x="2029.36" y="2225.92">0.2</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 2878.77, 2225.92)" x="2878.77" y="2225.92">0.3</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:69px; text-anchor:middle;" transform="rotate(0, 1631.75, 2323.57)" x="1631.75" y="2323.57">x</text>
</g>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,2155.53 252.472,188.976 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,2082.91 271.37,2082.91 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,1658.21 271.37,1658.21 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,1233.5 271.37,1233.5 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,808.799 271.37,808.799 
  "/>
<polyline clip-path="url(#clip430)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  252.472,384.095 271.37,384.095 
  "/>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 160.773, 2100.41)" x="160.773" y="2100.41">0.00</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 160.773, 1675.71)" x="160.773" y="1675.71">0.05</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 160.773, 1251)" x="160.773" y="1251">0.10</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 160.773, 826.299)" x="160.773" y="826.299">0.15</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:50px; text-anchor:middle;" transform="rotate(0, 160.773, 401.595)" x="160.773" y="401.595">0.20</text>
</g>
<g clip-path="url(#clip430)">
<text style="fill:#000000; fill-opacity:1; font-family:Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif; font-size:69px; text-anchor:middle;" transform="rotate(-90, 51.6167, 1172.25)" x="51.6167" y="1172.25">r</text>
</g>
<polyline clip-path="url(#clip432)" style="stroke:#002e5d; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  374.867,569.495 377.984,590.348 385.128,610.241 396.153,628.869 410.848,646.069 429.008,661.885 450.6,676.402 475.683,689.729 504.393,701.935 536.84,713.028 
  573.127,722.983 613.228,731.766 657.074,739.334 704.564,745.722 755.452,750.92 809.687,755.006 867.09,758.055 927.559,760.179 990.934,761.47 1057.16,762.048 
  1126.35,762.065 1198.23,761.657 1272.88,760.96 1349.83,760.179 1406.57,759.576 1462,758.82 1516.66,757.885 1571.78,756.79 1627.58,755.567 1684.02,754.25 
  1741.04,752.857 1798.58,751.421 1856.4,749.977 1914.21,748.559 1971.77,747.183 2029.1,745.866 2086.17,744.618 2142.87,743.462 2199.24,742.418 2250.21,741.543 
  2301.18,740.744 2352.02,740.022 2402.74,739.394 2453.45,738.85 2504.25,738.383 2555.1,737.992 2605.95,737.678 2656.85,737.449 2707.86,737.279 2758.58,737.16 
  2807.74,737.109 2852.79,737.092 2889.05,737.1 2916.7,737.117 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#002e5d; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" stroke-dasharray="32, 20" points="
  2917.35,727.884 2879.53,712.306 2828.57,691.7 2769.7,668.451 2708.17,644.744 2645.74,621.335 2582.92,598.392 2519.83,575.985 2456.42,554.062 2392.88,532.707 
  2329.25,511.931 2265.62,491.766 2201.82,472.179 2137.91,453.169 2074.17,434.847 2010.57,417.213 1947.05,400.268 1883.74,384.061 1820.53,368.585 1757.67,353.899 
  1695.3,340.087 1633.25,327.142 1571.6,315.081 1510.6,303.987 1450.57,293.956 1392.41,285.165 1336.25,277.809 1281.08,271.854 1226.53,267.217 1172.71,263.946 
  1119.57,262.069 1067.21,261.593 1015.67,262.562 965.061,264.974 915.489,268.881 867.014,274.275 819.769,281.164 773.918,289.548 729.596,299.435 686.922,310.8 
  646.108,323.592 607.435,337.734 571.105,353.16 537.341,369.74 506.406,387.34 478.477,405.772 453.751,424.892 432.278,444.564 414.135,464.678 399.338,485.175 
  387.931,505.994 380.006,527.067 375.631,548.226 374.867,569.495 
  "/>
<polyline clip-path="url(#clip432)" style="stroke:#9b0000; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  330.545,2082.91 332.405,2055.15 337.484,2029.97 345.52,2005.87 356.511,1982.53 370.424,1959.82 387.2,1937.8 406.821,1916.51 429.203,1895.96 454.227,1876.28 
  481.773,1857.51 511.681,1839.73 543.805,1822.97 577.969,1807.31 613.992,1792.74 651.697,1779.33 690.991,1767.02 731.66,1755.85 773.528,1745.81 816.627,1736.85 
  860.804,1728.95 905.848,1722.09 951.716,1716.26 998.468,1711.4 1045.91,1707.48 1094.01,1704.48 1142.88,1702.32 1191.99,1701.03 1241.19,1700.67 1293.86,1700.9 
  1349.83,1701.05 1405.23,1701.05 1461.31,1701.11 1517.86,1701.18 1574.48,1701.22 1631.17,1701.28 1688.01,1701.34 1744.85,1701.4 1801.63,1701.45 1858.42,1701.51 
  1915.21,1701.56 1972.02,1701.62 2028.84,1701.68 2085.64,1701.73 2142.43,1701.79 2199.24,1701.84 2258.99,1701.9 2318.69,1701.99 2377.86,1702.04 2435.75,1702.06 
  2488.94,1702.39 2537.26,1703.56 2583.06,1705.88 2627.9,1709.44 2672.09,1714.29 2715.52,1720.44 2757.85,1727.9 2799.08,1736.72 2839.24,1746.96 2878.5,1758.66 
  2916.24,1771.52 2932.95,1777.74 
  "/>
</svg>
<p>Now we want to put all the geometry together in a <code>DuctGeometry</code> object.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.DuctGeometry" href="#DuctTAPE.DuctGeometry"><code>DuctTAPE.DuctGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DuctGeometry{TA,TF}</code></pre><p><strong>Fields:</strong></p><ul><li><code>wallinnerxcoordinates::Array{Float}</code> : x coordinates of inner (lower) wall geometry</li><li><code>wallinnerrcoordinates::Array{Float}</code> : r coordinates of inner (lower) wall geometry</li><li><code>wallinnerspline::FLOWMath.Akima</code> : Spline of inner coordinates of duct wall</li><li><code>wallouterxcoordinates::Array{Float}</code> : x coordinates of outer (upper) wall geometry</li><li><code>wallouterrcoordinates::Array{Float}</code> : r coordinates of outer (upper) wall geometry</li><li><code>wallouterspline::FLOWMath.Akima</code> : Spline of outer coordinates of duct wall</li><li><code>hubxcoordinates::Array{Float}</code> : x coordinates of hub geometry</li><li><code>hubrcoordinates::Array{Float}</code> : r coordinates of hub geometry</li><li><code>hubspline::FLOWMath.Akima</code> : Spline of hub coordinates</li><li><code>LEx::Float</code> : x-position of leading edge</li><li><code>TEx::Float</code> : x-position of trailing edge</li><li><code>chord::Float</code> : chord length</li><li><code>wallbluntTE::Bool</code> : flag for blunt trailing edge on wall</li><li><code>hubbluntTE::Bool</code> : flag for blunt trailing edge on hub, unused</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L66-L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.defineDuctGeometry" href="#DuctTAPE.defineDuctGeometry"><code>DuctTAPE.defineDuctGeometry</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">defineDuctGeometry(
    wallinnerxcoordinates,
    wallinnerrcoordinates,
    wallouterxcoordinates,
    wallouterrcoordinates,
    hubxcoordinates=nothing,
    hubrcoordinates=nothing;
    LEx=nothing,
    TEx=nothing,
    chord=nothing,
    bluntTEtol=1e-9,
)</code></pre><p>Constructor function for the DuctGeometry Object.</p><p><strong>Required Arguments:</strong></p><ul><li><code>wallinnerxcoordinates::Array{Float}</code> : x coordinates of inner (lower) wall geometry</li><li><code>wallouterxcoordinates::Array{Float}</code> : x coordinates of outer (upper) wall geometry</li><li><code>wallinnerrcoordinates::Array{Float}</code> : r coordinates of inner (lower) wall geometry</li><li><code>wallouterrcoordinates::Array{Float}</code> : r coordinates of outer (upper) wall geometry</li></ul><p><strong>Optional Arguments:</strong></p><ul><li><code>hubxcoordinates::Array{Float}</code> : x coordinates of hub geometry</li><li><code>hubrcoordinates::Array{Float}</code> : r coordinates of hub geometry</li></ul><p>Note, if hub x and r coordinates are not set, the x coordinates for the inner wall will be used and the r coordinates will be set to zero.  Also note that if one of these is unset, the other must also be unset.</p><p><strong>Keyword Arguments:</strong></p><ul><li><code>LEx::Float</code> : x-position of manually defined leading edge.  Set to foremost x-coordinate of duct and hub geometry otherwise.</li><li><code>TEx::Float</code> : x-position of mannually defined trailing edge.  Set to the rear-most x-coordinate of duct and hub geometry otherwise.</li><li><code>chord::Float</code> : manually defined chord length.  Set to difference between leading and trailing edges otherwise.</li><li><code>bluntTEtol::Float</code> : tolerance for how close trailing edge points need to be before being considered a blunt trailing edge.</li></ul><p><strong>Notes</strong></p><p>The wall inner and outer and hub coordinates are all saved from leading to trailing edge (this helps with splining things later). It is assumed that the wall is similar to an airfoil that may or may not have a blunt trailing edge.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/walls.jl#L7-L43">source</a></section></article><p>Using the <code>defineDuctGeometry</code> contructor function, we can input our wall and hub geometries and let the leading and trailing edges and chord length be calculated automatically. Note that this function also outputs a spline object for the inner duct wall and the hub wall. These splines are used throughout the initialization process to help with rotor placement.</p><pre><code class="language- hljs"># --- DEFINE DUCT OBJECT
ductgeometry, ductsplines = DuctTAPE.defineDuctGeometry(
    innerwallx,
    innerwallr,
    outerwallx,
    outerwallr,
    hubx,
    hubr
)</code></pre><p>The <code>ductgeometry</code> and <code>ductsplines</code> objects now contains all the geometry information we&#39;ll need.</p><h2 id="Defining-Rotors"><a class="docs-heading-anchor" href="#Defining-Rotors">Defining Rotors</a><a id="Defining-Rotors-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-Rotors" title="Permalink"></a></h2><p>Along with the duct geometry, we will need to define an array of <code>Rotor</code> objects.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.RotorGeometry" href="#DuctTAPE.RotorGeometry"><code>DuctTAPE.RotorGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RotorGeometry{TF, TI, TA, TC, TT, TAF, TR, TM}</code></pre><p><strong>Fields:</strong></p><ul><li><code>xlocation::Float</code> : x location of rotor plane, non-dimensional based on duct chord (max TE location - min LE location of hub/wall)</li><li><code>numblades::Int</code> : number of rotor blades</li><li><code>radialstations::Array{Float}</code> : array of radial stations defining rotor blade, non-dimensional with hub=0, tip=1</li><li><code>tipgap::Float</code> : gap between blade tip and duct wall (not implemented yet)</li><li><code>chords::Array{Float}</code> : array of chord lengths at radial stations defining rotor blade, non-dimensional based on blade tip radius</li><li><code>twists::Array{Float}</code> : array of twist values (in degrees) at radial stations defining rotor blade</li><li><code>skews::Array{Float}</code> : array of skew values (similar to sweep) at radial stations defining rotor blade, non-dimensional based on rotor tip radius. (note: this is for reference only, the solver can&#39;t use this information)</li><li><code>rakes::Array{Float}</code> : array of rake values (similar to dihedral) at radial stations defining rotor blade, non-dimensional based on rotor tip radius. (note: this is for reference only right now. it may be implemented into the grid initialization functions later.)</li><li><code>airfoils::Array{Airfoil}</code> : array of airfoil data objects at radial stations defining rotor blade</li><li><code>solidity:Array{Float}</code> : array of rotor solidity at radial stations defining rotor blade, chord/distance between blade sections</li><li><code>rpm::Float</code> : RPM of rotor</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L102-L117">source</a></section></article><p>Note that we want to create an array, even if we only have one rotor.  When we initialize the grid, it will expect an array. Also, our rotor object has more fields than are used in the original dfdc, for now, we&#39;ll set the section skew, rake, and solidity to nothing. For the airfoils, we will use the <a href="https://flow.byu.edu/CCBlade.jl/stable/reference/#CCBlade.AlphaReAF">CCBlade.jl</a> functionality and for our case here, define our airfoils as <code>ccb.AlphaReAF</code> objects (where CCBlade has been included in the DuctTAPE package and renamed &#39;ccb&#39;) using data files from digitized dfdc plots.</p><p>We can define rotor objects directly, or we can use the <code>initialize_rotor_geometry</code> function to help us.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.initialize_rotor_geometry" href="#DuctTAPE.initialize_rotor_geometry"><code>DuctTAPE.initialize_rotor_geometry</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function initialize_rotor_geometry(
    xlocation,
    numblades,
    numstations,
    chords,
    twists,
    airfoils,
    rpm;
    radialstations=nothing,
    tipgap=0.0, #non-dimensional relative to blade length
    skews=nothing,
    rakes=nothing,
    solidities=nothing,
)</code></pre><p>Initialize non-dimensional rotor geometry and other relative information.</p><p><strong>Arguments:</strong></p><ul><li><code>xlocation::Float</code> : x location of rotor relative to duct chord</li><li><code>numblades::Float</code> : number of rotor blades</li><li><code>numstations::Float</code> : number of radial stations (the length of the below sectional properties)</li><li><code>chords::Array{Float}</code> : array of section chord lengths (relative to blade tip radius)</li><li><code>twists::Array{Float}</code> : array of section twists (0 degrees is aligned with the axial direction) in degrees</li><li><code>airfoils::Array{AFType}</code> : airfoil objects at each section</li><li><code>rpm::Float</code> : RPM of rotor</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>radialstations::Array{Float}</code> : non-dimensional radial stations (0 = hub radius, 1 = tip radius)</li><li><code>tipgap::Float</code> : non-dimensional relative to blade length (Not implemented yet)</li><li><code>skews::Array{Float}</code> : sectional skew distance relative to tip radius (not implemented yet)</li><li><code>rakes::Array{Float}</code> : sectional rake distances relative to tip radius (not implemented yet)</li><li><code>solidities::Array{Float} or Nothing</code> : sectional rotor solidities, if using.</li></ul><p><strong>Returns:</strong></p><ul><li><code>rotorgeometry::DuctTAPE.RotorGeometry</code> : Rotor geometry object</li></ul><p><strong>TODOs: if rotor rake is present, need to redo parts of grid initialization (and check that the unused portions of the code work now) to account for different x-locations of start of wake.  NOTE: not sure if rake will work with this solver. Need to think about that more before implementing.</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/rotors.jl#L11-L49">source</a></section></article><pre><code class="language-julia hljs"># -- GENERATE ROTOR OBJECT ARRAY

# set datapath for airfoil data files. Remember to grab these files and change the data path for your case.
datapath = &quot;../../data/dfdc/airfoils/&quot;

# generate airfoils for rotor
af1 = DuctTAPE.ccb.AlphaReAF([
    datapath * &quot;disk1_re5e5.dat&quot;,
    datapath * &quot;disk1_re1e6.dat&quot;,
    datapath * &quot;disk1_re1.5e6.dat&quot;,
    datapath * &quot;disk1_re2e6.dat&quot;,
])

# generate airfoils for stator
af2 = DuctTAPE.ccb.AlphaReAF([
    datapath * &quot;disk2_re5e5.dat&quot;,
    datapath * &quot;disk2_re1e6.dat&quot;,
    datapath * &quot;disk2_re1.5e6.dat&quot;,
    datapath * &quot;disk2_re2e6.dat&quot;,
])

#generate rotor object using initialization function
rotor1 = DuctTAPE.initialize_rotor_geometry(
    xdisk1, #x position of rotor
    nblade1, # number of blades
    length(rnondim1), #number of radial stations
    chord1, #chords
    beta1, #twists
    fill(af1, length(rnondim1)), #airfoils
    rpm; #RPM
    radialstations=rnondim1 #radial station locations
)

#generate stator object (rpm is zero for stator) using direct definition
rotor2 = DuctTAPE.RotorGeometry(
    xdisk2, #x position of rotor
    nblade2, #number of blades
    rnondim2, #radial stations
    0.0, #tip gap
    chord2, #chords
    beta2, #twists
    zeros(length(rnondim2)), #skews
    zeros(length(rnondim2)), #rakes
    fill(af2, length(rnondim2)), #airfoils
    -1 .* ones(Int, length(rnondim2)), #solidities
    0.0, #RPM
)

#assemble array
rotors = [rotor1; rotor2]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{RotorGeometry{Float64, Int64, Vector{Float64}, Float64, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{CCBlade.AlphaReAF{Float64, String}}, TSo, Float64} where TSo}:
 RotorGeometry{Float64, Int64, Vector{Float64}, Float64, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{CCBlade.AlphaReAF{Float64, String}}, Vector{Float64}, Float64}(0.39167175295956963, 6, [0.0, 0.11110776761354521, 0.22221553522709042, 0.33331327234793784, 0.4444210399614829, 0.5555488685604237, 0.6665864227250843, 0.7777242818167229, 0.8888621409083616, 0.9999999999999999], 0.0, [0.3744190691790399, 0.3571542712564086, 0.3402423596777416, 0.3250882215859911, 0.3122378320793662, 0.3017244823223917, 0.2933950329582529, 0.2870430787668953, 0.2824688727611692, 0.27951927558425993], [19.171999999999997, 30.241999999999997, 38.293, 43.571, 47.791, 51.234, 54.103, 56.543, 58.663, 60.547], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], CCBlade.AlphaReAF{Float64, String}[CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-1.83247422837987 -1.83247422837987 -1.83247422837987 -1.83247422837987; -1.8220217655802948 -1.8220217655802948 -1.8220217655802948 -1.8220217655802948; … ; 2.201288675740593 2.201288675740593 2.201288675740593 2.201288675740593; 2.2106958925035443 2.2106958925035443 2.2106958925035443 2.2106958925035443], [0.7587569421558654 0.5719166039184465 0.6427366145549502 0.5536068691841667; 0.7491961764011059 0.5649976280688906 0.6349370410615811 0.5470652926058168; … ; 0.4865868352978613 0.42183733286048736 0.45944804534869116 0.3622685436104774; 0.4928516534112002 0.427045434339654 0.4651090252425691 0.3664576687162524], &quot;DFDC Disk 1 Airfoil&quot;, 0.15)], [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0], 8000.0)
 RotorGeometry{Float64, Int64, Vector{Float64}, Float64, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{CCBlade.AlphaReAF{Float64, String}}, Vector{Int64}, Float64}(0.7180648804258777, 9, [0.0, 0.11064323803152241, 0.2212963145156531, 0.3320871293362981, 0.44301568249345763, 0.5541213277975642, 0.6652958422699281, 0.7766671257944551, 0.8882351783711461, 1.0], 0.0, [0.38141720896601594, 0.3786629856044173, 0.37502136330769736, 0.3708604483007954, 0.366384013672517, 0.3617432459081049, 0.3570433182146848, 0.3523828304739368, 0.3478472359166503, 0.3434956944718333], [-2.7109999999999985, -1.7390000000000043, -1.2279999999999944, -0.867999999999995, -0.6380000000000052, -0.4410000000000025, -0.12399999999999523, 0.4170000000000016, 1.0450000000000017, 1.6119999999999948], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], CCBlade.AlphaReAF{Float64, String}[CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15), CCBlade.AlphaReAF{Float64, String}([-1.5707963267948966, -1.5533430342749532, -1.53588974175501, -1.5184364492350666, -1.5009831567151235, -1.4835298641951802, -1.4660765716752369, -1.4486232791552935, -1.4311699866353502, -1.413716694115407  …  1.413716694115407, 1.4311699866353502, 1.4486232791552935, 1.4660765716752369, 1.4835298641951802, 1.5009831567151235, 1.5184364492350666, 1.53588974175501, 1.5533430342749532, 1.5707963267948966], [100000.0, 1.0e6, 1.5e6, 2.0e6], [-2.1875623555013735 -2.1875623555013735 -2.1875623555013735 -2.1875623555013735; -2.178599934469161 -2.178599934469161 -2.178599934469161 -2.178599934469161; … ; 1.8240979418446208 1.8240979418446208 1.8240979418446208 1.8240979418446208; 1.8346219968858473 1.8346219968858473 1.8346219968858473 1.8346219968858473], [0.5569924531654876 0.5449484868984782 0.43162527216141156 0.31260669435394906; 0.5498304299041235 0.5380729449908267 0.4264686157347317 0.309168923392014; … ; 0.6031592027561349 0.6292733053856933 0.7439713642510304 0.3790396444056832; 0.6107281591876736 0.6370945598941206 0.7533064099512512 0.38332871946022884], &quot;DFDC Disk 2 Airfoil&quot;, 0.15)], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1], 0.0)</code></pre><p>Take note that the rotor objects are defined using non-dimensional parameters. If we want to visualize things at this point, we&#39;ll have to dimensionalize things, which is done internally in the code using <code>BladeDimensions</code> objects.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.BladeDimensions" href="#DuctTAPE.BladeDimensions"><code>DuctTAPE.BladeDimensions</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BladeDimensions{TF, TA}</code></pre><p><strong>Fields:</strong></p><ul><li><code>rhub::Float</code> : hub radius (dimensional)</li><li><code>rtip::Float</code> : tip radius (dimensional)</li><li><code>rdim::Array{Float}</code> : array of dimensional radial stations</li><li><code>cdim::Array{Float}</code> : array of dimensional chords</li><li><code>tdim::Array{Float}</code> : array of twists (already dimensional in rotorgeometry)</li><li><code>sweptannulus::Float</code> : area of blade swept annulus</li><li><code>sweptarea::Float</code> : area of blade tip swept disk</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L132-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.initialize_blade_dimensions" href="#DuctTAPE.initialize_blade_dimensions"><code>DuctTAPE.initialize_blade_dimensions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">initialize_blade_dimensions(rotors, ductgeometry)</code></pre><p>Initilialize needed blade information for various calculations during the solution process.</p><p><strong>Arguments:</strong></p><ul><li><code>ductsplines::DuctTAPE.ductsplines</code> : ductsplines object containing splines for duct wall and hub</li><li><code>Rotor::DuctTAPE.Rotor</code> : Rotor object for which to define blade information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/rotors.jl#L187-L195">source</a></section></article><pre><code class="language- hljs">blade1 = DuctTAPE.initialize_blade_dimensions(ductgeometry, ductsplines, rotor1)
blade2 = DuctTAPE.initialize_blade_dimensions(ductgeometry, ductsplines, rotor2)

blades = [blade1; blade2]

nr = length(blade1.rdim)
plot!(rotor1.xlocation.*ductgeometry.chord*ones(nr), blade1.rdim, color=4, linewidth=2)
plot!(rotor2.xlocation.*ductgeometry.chord*ones(nr), blade2.rdim, color=4, linewidth=2)
</code></pre><h2 id="Wake-Grid-Initialization"><a class="docs-heading-anchor" href="#Wake-Grid-Initialization">Wake Grid Initialization</a><a id="Wake-Grid-Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Wake-Grid-Initialization" title="Permalink"></a></h2><p>With the duct geometry and rotor data defined, we can now initialize the rotor wake grid. We&#39;ll begin by setting some grid options.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The number of radial stations set for grid options must match the number of radial stations defined for the rotor objects. Furthermore, the rotors must have the same number of radial stations defined.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.GridOptions" href="#DuctTAPE.GridOptions"><code>DuctTAPE.GridOptions</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GridOptions{TF,TI}</code></pre><p><strong>Fields:</strong></p><ul><li><code>num_radial_stations::Integer</code> : Number of radial stations (equal to number of rotor blade elements used in analysis)</li><li><code>inlet_length::Float</code> : inlet length (unused)</li><li><code>wake_length::Float</code> : length of wake behind duct relative to chord length</li><li><code>wake_expansion_factor::Float</code> : expansion factor to apply to wake grid generation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L45-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.defineGridOptions" href="#DuctTAPE.defineGridOptions"><code>DuctTAPE.defineGridOptions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">defineGridOptions(
    num_radial_stations;
    inlet_length=0.5,
    wake_length=1.0,
    wake_expansion_factor=1.1
)</code></pre><p>Constructor function for the GridOptions object.</p><p><strong>Required Argument:</strong></p><ul><li><code>num_radial_stations::Integer</code> : Number of radial stations (equal to number of rotor blade elements used in analysis)</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>inlet_length::Float</code> : inlet length (unused)</li><li><code>wake_length::Float</code> : length of wake behind duct in terms of chord length</li><li><code>wake_expansion_factor::Float</code> : expansion factor to apply to wake grid generation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/wakegrid.jl#L12-L29">source</a></section></article><pre><code class="language-julia hljs"># --- SET GRID OPTIONS
num_radial_stations = length(rnondim1)
grid_options = DuctTAPE.defineGridOptions(num_radial_stations)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GridOptions{Float64, Int64}(10, 0.0, 1.0, 1.1)</code></pre><p>With options set, rotor location chosen, and the wall and hub geometry available, we&#39;re finally ready to initialize the wake grid object.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.generate_wake_grid" href="#DuctTAPE.generate_wake_grid"><code>DuctTAPE.generate_wake_grid</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate_wake_grid(ductgeometry, rotors, grid_options; max_iterations=-1, tol=1e-9)</code></pre><p>Initialize grid via zero-thrust, unit freestream solution.</p><p><strong>Arguments:</strong></p><ul><li><code>ductgeometry::DuctTAPE.DuctGeometry</code> : ductgeometry Geometry Object</li><li><code>rotors::Array{DuctTAPE.Rotor}</code> : Array of rotor objects</li><li><code>grid_options::DuctTAPE.GridOptions</code> : Grid options object</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>max_iterations::Int</code> : maximum number of iterations to run, default=100</li><li><code>tol::Float</code> : convergence tolerance, default = 1e-9</li></ul><p><strong>Returns:</strong></p><ul><li><code>wakegridgeometry::DuctTAPE.WakeGridGeometry</code> : WakeGridGeometry Object</li></ul><p><strong>NOTES:</strong></p><ul><li>The grid is designed such that the grid spacing in the axial direction will line up with the rotor positions as well as the trailing edge positions of the duct wall and hub (as well as the leading edge positions if they happen to be behind a rotor, which is not advised).</li><li>In addition, the grid axial spacing is taken to be as close as possible to the radial spacing, which is defined directly from the rotor radial station positions.</li><li>The wake spacing is started at the average of the axial spacing inside the duct area and then expanded by an expansion factor that can be defined by the user and is set to 1.1 by default.  This means that the end of the wake will actually not lie directly at the length input by the user (default 2x duct chord), but should be close enough.</li><li>If more than one rotor is being analyzed, the rotor radial stations have more than likely changed for aft rotors.  Therefore, rotor information for all but the foremost rotor are reinterpolated so that rotor stations line up with wake grid stations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/wakegrid.jl#L655-L677">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.WakeGridGeometry" href="#DuctTAPE.WakeGridGeometry"><code>DuctTAPE.WakeGridGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">WakeGridGeometry{TF,TI,TA,TW,TH}</code></pre><p>Wake grid geometry object</p><p><strong>Fields:</strong></p><ul><li><code>x_grid_points::Matrix{Float}</code> : 2D Array of x grid points</li><li><code>r_grid_points::Matrix{Float}</code> : 2D Array of radial grid points</li><li><code>nx::Int</code> : number of x stations</li><li><code>nr::Int</code> : number of radial stations</li><li><code>wallTEidx::Int</code> : index of duct wall trailing edge x location</li><li><code>hubTEidx::Int</code> : index of hub wall trailing edge x location</li><li><code>rotoridxs::Array{Int}</code> : array of indices of rotor x locations</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L154-L167">source</a></section></article><pre><code class="language- hljs"># --- INITIALIZE GRID
wakegrid = DuctTAPE.generate_wake_grid(ductgeometry, ductsplines, rotors, grid_options)

xg = wakegrid.x_grid_points
rg = wakegrid.r_grid_points
nx = wakegrid.nx
nr = wakegrid.nr

plot(; xlabel=&quot;x&quot;, ylabel=&quot;r&quot;, aspectratio=:equal)
plot!(
    ductgeometry.wallinnerxcoordinates,
    ductgeometry.wallinnerrcoordinates;
    color=1,
    linewidth=2,
)
plot!(
    ductgeometry.wallouterxcoordinates,
    ductgeometry.wallouterrcoordinates;
    color=1,
    linestyle=:dash,
    linewidth=2,
)
plot!(ductgeometry.hubxcoordinates, ductgeometry.hubrcoordinates; color=2, linewidth=2)

plot!(rotor1.xlocation .* ductgeometry.chord * ones(nr), blade1.rdim; color=4, linewidth=2)
plot!(rotor2.xlocation .* ductgeometry.chord * ones(nr), blade2.rdim; color=4, linewidth=2)

plot!(xg, rg; color=3, linewidth=0.5)
plot!(xg&#39;, rg&#39;; color=3, linewidth=0.5)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This process should be relatively robust in that most combinations of wall and hub and rotor position should generate a grid. However, in the case that there is no overlap in the x-positions of the wall and hub, problems may occur later in the solver. In addition if the rotor is positioned somewhere not between the wall and hub, for example, if the rotor is out in front of the duct, then if a solution is found, it will likely be inaccurate. And finally, things will break if the hub and wall overlap in the radial direction, in other words, if the duct is blocked.</p></div></div><h2 id="System-Paneling"><a class="docs-heading-anchor" href="#System-Paneling">System Paneling</a><a id="System-Paneling-1"></a><a class="docs-heading-anchor-permalink" href="#System-Paneling" title="Permalink"></a></h2><p>With the geometry defined and the grid initialized, we can define the system panels and their control points (centers). To do so, we use the <code>generate_paneling</code> function:</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>DuctTAPE.generate_paneling</code>. Check Documenter&#39;s build log for details.</p></div></div><p>For our case here, we are going to use a rough sampling of the geometry data in order to more clearly see the paneling. The generated panels will be contained in <code>Panels</code> objects.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.Panels" href="#DuctTAPE.Panels"><code>DuctTAPE.Panels</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Panels{TPEx,TPEr,TPC,TPN,TPT}</code></pre><p><strong>Fields:</strong></p><ul><li><code>panel_edges_x::Array{Tuple{Float, Float}}</code> : Array of sets of x locations for panel edges</li><li><code>panel_edges_r::Array{Tuple{Float, Float}}</code> : Array of sets of r locations for panel edges</li><li><code>panel_centers::Array{Tuple{Float, Float}}</code> : Array of sets of x,r locations for panel centers</li><li><code>panel_normals::Array{Tuple{Float, Float}}</code> : Array of panel unit normal vectors</li><li><code>panel_tyes::Array{String}</code> : Array of panel types (for use in assembling linear system)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L180-L189">source</a></section></article><pre><code class="language- hljs"># Get paneling of various objects

wall_panels, hub_panels, wake_panels, rotor_source_panels = DuctTAPE.generate_paneling(
    ductgeometry, ductsplines, rotors, wakegrid
)</code></pre><pre><code class="language- hljs"># PLOT PANELS

plot(; xlabel=&quot;x&quot;, ylabel=&quot;r&quot;, aspectratio=:equal, legend=true, label=&quot;&quot;)

# wall panels:
for i in 1:length(wall_panels.panel_edges_x)
    plot!(
        [wall_panels.panel_edges_x[i][1]; wall_panels.panel_edges_x[i][2]],
        [wall_panels.panel_edges_r[i][1]; wall_panels.panel_edges_r[i][2]];
        color=1,
        linewidth=0.5,
        markershape=:diamond,
        markersize=2,
        label=&quot;&quot;,
    )
end

scatter!(
    getindex.(wall_panels.panel_centers, 1),
    getindex.(wall_panels.panel_centers, 2);
    color=1,
    markersize=3,
    markershape=:circle,
    label=&quot;wall panel centers&quot;,
)

#hub panels:
for i in 1:length(hub_panels.panel_edges_x)
    plot!(
        [hub_panels.panel_edges_x[i][1]; hub_panels.panel_edges_x[i][2]],
        [hub_panels.panel_edges_r[i][1]; hub_panels.panel_edges_r[i][2]];
        markersize=2,
        markershape=:diamond,
        color=2,
        linewidth=0.5,
        label=&quot;&quot;,
    )
end

scatter!(
    getindex.(hub_panels.panel_centers, 1),
    getindex.(hub_panels.panel_centers, 2);
    markersize=3,
    markershape=:circle,
    color=2,
    label=&quot;hub panel centers&quot;,
)

#vortex sheet panels
for i in 1:length(wake_panels.panel_centers)
    plot!(
        [wake_panels.panel_edges_x[i][1]; wake_panels.panel_edges_x[i][2]],
        [wake_panels.panel_edges_r[i][1]; wake_panels.panel_edges_r[i][2]];
        markersize=2,
        markershape=:diamond,
        color=3,
        linewidth=0.5,
        label=&quot;&quot;,
    )
end

scatter!(
    getindex.(wake_panels.panel_centers, 1),
    getindex.(wake_panels.panel_centers, 2);
    markersize=3,
    markershape=:circle,
    color=3,
    label=&quot;vortex sheet panel centers&quot;,
)

#rotor source panels:
for i in 1:length(rotor_source_panels[1].panel_centers)
    plot!(
        [
            rotor_source_panels[1].panel_edges_x[i][1]
            rotor_source_panels[1].panel_edges_x[i][2]
        ],
        [
            rotor_source_panels[1].panel_edges_r[i][1]
            rotor_source_panels[1].panel_edges_r[i][2]
        ];
        markersize=2,
        markershape=:diamond,
        color=4,
        linewidth=0.5,
        label=&quot;&quot;,
    )
end

scatter!(
    getindex.(rotor_source_panels[1].panel_centers, 1),
    getindex.(rotor_source_panels[1].panel_centers, 2);
    markersize=3,
    markershape=:circle,
    color=4,
    label=&quot;rotor source panel centers&quot;,
)

# stator source panels
for i in 1:length(rotor_source_panels[2].panel_centers)
    plot!(
        [
            rotor_source_panels[2].panel_edges_x[i][1]
            rotor_source_panels[2].panel_edges_x[i][2]
        ],
        [
            rotor_source_panels[2].panel_edges_r[i][1]
            rotor_source_panels[2].panel_edges_r[i][2]
        ];
        markersize=2,
        markershape=:diamond,
        color=4,
        linewidth=0.5,
        label=&quot;&quot;,
    )
end

scatter!(
    getindex.(rotor_source_panels[2].panel_centers, 1),
    getindex.(rotor_source_panels[2].panel_centers, 2);
    markersize=3,
    markershape=:circle,
    color=4,
    label=&quot;&quot;,
)</code></pre><p>We could also get all the various panels into a single object using the <code>PanelSystem</code> object and associated <code>generate_panel_system</code> function.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>DuctTAPE.PanelSystem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>DuctTAPE.generate_panel_system</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Initializing-Rotor-Aerodynamics"><a class="docs-heading-anchor" href="#Initializing-Rotor-Aerodynamics">Initializing Rotor Aerodynamics</a><a id="Initializing-Rotor-Aerodynamics-1"></a><a class="docs-heading-anchor-permalink" href="#Initializing-Rotor-Aerodynamics" title="Permalink"></a></h2><p>Now that we have all the geometry set up, we&#39;re ready to start initializing the aerodynamics of our system. We first will define the freestream conditions by defining a <code>Freestream</code> object.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.Freestream" href="#DuctTAPE.Freestream"><code>DuctTAPE.Freestream</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Freestream{TVI,TVR,TF}</code></pre><p><strong>Fields:</strong></p><ul><li><code>vinf::Float</code> : Freestream velocities</li><li><code>vref::Float</code> : Reference velocities</li><li><code>rho::Float</code> : Air density value</li><li><code>vso::Float</code> : Speed of sound value</li><li><code>mu::Float</code> : Air dynamic viscosity value</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L27-L36">source</a></section></article><pre><code class="language-julia hljs">#define freestream object from example case values
freestream = DuctTAPE.Freestream(vinf, vref, rho, vso, rmu)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Freestream{Float64, Float64, Float64}(0.0, 50.0, 1.226, 340.0, 1.78e-5)</code></pre><p>After we have created a freestream object, we can initialize the rotor aerodynamics (circulations and velocities) as well as initialize the rotor influence on the rotor wake grid aerodynamics. We&#39;ll do so using the <code>initialize_system_aerodynamics</code> function.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.initialize_system_aerodynamics" href="#DuctTAPE.initialize_system_aerodynamics"><code>DuctTAPE.initialize_system_aerodynamics</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">initialize_system_aerodynamics(
    rotors, blades, wakegrid, freestream; niter=10, rlx=0.5
)</code></pre><p>Initialize system aerodynamics for rotors and wakes.</p><p><strong>Arguments:</strong></p><ul><li><code>rotors::Array{DuctTAPE.RotorGeometry}</code> : array of rotor geometries</li><li><code>blades::Array{DuctTAPE.BladeDimensions}</code> : array of dimensional blade geometries</li><li><code>wakegrid::DuctTAPE.WakeGridGeometry</code> : wake grid geometry</li><li><code>freestream::DuctTAPE.Freestream</code> : freestream information</li></ul><p><strong>Returns:</strong></p><ul><li><code>systemaero::DuctTAPE.SystemAero</code> : aerodynamic values for rotor sections and wake grid</li><li><code>rotorvelocities::DuctTAPE.RotorVelocities</code> : velocities along rotor blades</li><li><code>Vm_avg::Float</code> : initial guess for average axial velocity in the wakes</li></ul><p><strong>Notes:</strong></p><p>This function starts by initializing the rotor operating point from a constant freestream. An iteration using momentum theory is performed to find the self-induced tangential velocities on the rotor. <code>set_grid_flow_data</code> is called at the end to initialize the circulation and enthalpy values on the wake grid (the entropy values are set to zero for now and are initialized later). <code>set_rotor_velocities</code> is also called at the end of this function to save the various rotor velocities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/system.jl#L41-L64">source</a></section></article><p>The returns of this function include the <code>SystemAero</code> object and the <code>RotorVelocities</code> object (see below), as well as an average axial velocity that is used later.</p><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.SystemAero" href="#DuctTAPE.SystemAero"><code>DuctTAPE.SystemAero</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SystemAero{TG,TH,TS,TC,TR}</code></pre><p><strong>Fields:</strong></p><ul><li><code>b_gamma_grid::Matrix{Float}</code> : B*Γ values on wake grid</li><li><code>delta_enthalpy_grid::Matrix{Float}</code> : ΔH (enthalpy) values on wake grid</li><li><code>delta_entropy_grid::Matrix{Float}</code> : ΔS (entropy) values on wake grid</li><li><code>b_circ_rotors::Array{Array{Float}}</code> : B*γ values at rotor blades (one array per rotor in increasing order of x location)</li><li><code>rotor_source_strengths::Array{Array{Float}}</code> : σ (source strength) values at rotor blades (one array per rotor in increasing order of x location)</li><li><code>control_point_velocities::Matrix{Float}</code> : velocities at control points</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L219-L229">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DuctTAPE.RotorVelocities" href="#DuctTAPE.RotorVelocities"><code>DuctTAPE.RotorVelocities</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RotorVelocities{TA}</code></pre><p><strong>Fields:</strong></p><ul><li><code>induced_axial_velocities::Array{Float}</code> : local section induced axial velocities</li><li><code>induced_radial_velocities::Array{Float}</code> : local section induced radial velocities</li><li><code>induced_tangential_velocities::Array{Float}</code> : local section induced tangential (circumferential) velocities</li><li><code>absolute_axial_velocities::Array{Float}</code> : local section absolute axial velocities</li><li><code>absolute_radial_velocities::Array{Float}</code> : local section absolute radial velocities</li><li><code>absolute_tangential_velocities::Array{Float}</code> : local section absolute tangential velocities</li><li><code>relative_axial_velocities::Array{Float}</code> : local section relative axial velocities</li><li><code>relative_radial_velocities::Array{Float}</code> : local section relative radial velocities</li><li><code>relative_tangential_velocities::Array{Float}</code> : local section relateive tangential velocities</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctTAPE.jl/blob/0a5b628cb9a4f7ab9a4bb2b0fdd32291a703cf35/src/types.jl#L268-L281">source</a></section></article><pre><code class="language- hljs"># initialize rotor and associated grid aerodynamics
system_aero, rotor_velocities, average_axial_velocity = initialize_system_aerodynamics(
    rotors, blades, wakegrid, rotor_source_panels, freestream)</code></pre><p>Please note that the initialization that takes place here is soley based on the rotor aerodynamics.  At this point, we have not taken into account the duct influence and the wake has only been initialized with some of the rotor influence. To be specific, the entropy and control point velocities are set to zeros in this function as they will be properly initialized later. The circulations, velocities, and enthalpies initialized thus far are soley based on the rotors and simply provide a first guesss so we have somewhere to start in our solution process.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Intro</a><a class="docs-footer-nextpage" href="../examples/">Guided Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 23 September 2022 20:21">Friday 23 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
