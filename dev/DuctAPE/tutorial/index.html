<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · DuctAPE.jl</title><meta name="title" content="Getting Started · DuctAPE.jl"/><meta property="og:title" content="Getting Started · DuctAPE.jl"/><meta property="twitter:title" content="Getting Started · DuctAPE.jl"/><meta name="description" content="Documentation for DuctAPE.jl."/><meta property="og:description" content="Documentation for DuctAPE.jl."/><meta property="twitter:description" content="Documentation for DuctAPE.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DuctAPE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">DuctAPE</span><ul><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Build-Inputs"><span>Build Inputs</span></a></li><li><a class="tocitem" href="#Set-Options"><span>Set Options</span></a></li><li><a class="tocitem" href="#Run-Analysis"><span>Run Analysis</span></a></li><li><a class="tocitem" href="#Outputs"><span>Outputs</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../public_api/">Public API Reference</a></li><li><a class="tocitem" href="../private_api/">Private API Reference</a></li><li><a class="tocitem" href="../api_index/">API Index</a></li><li><a class="tocitem" href="../theory/">Theory</a></li></ul></li><li><span class="tocitem">C<span>$^4$</span>Blade</span><ul><li><a class="tocitem" href="../../C4Blade/intro/">Intro</a></li><li><a class="tocitem" href="../../C4Blade/examples/">Examples</a></li><li><a class="tocitem" href="../../C4Blade/api/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">DuctAPE</a></li><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/byuflowlab/DuctAPE.jl/blob/{commit}{path}#L{line}" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/byuflowlab/DuctAPE.jl/blob/main/docs/src/DuctAPE/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><ul><li><a href="#Getting-Started">Getting Started</a></li><li class="no-marker"><ul><li><a href="#Build-Inputs">Build Inputs</a></li><li class="no-marker"><ul><li><a href="#Body-Geometry">Body Geometry</a></li><li><a href="#Rotor-Geometry">Rotor Geometry</a></li><li><a href="#Operating-Point">Operating Point</a></li><li><a href="#Paneling-Constants">Paneling Constants</a></li><li><a href="#Reference-Parameters">Reference Parameters</a></li><li><a href="#All-Together">All Together</a></li></ul></li><li><a href="#Set-Options">Set Options</a></li><li><a href="#Run-Analysis">Run Analysis</a></li><li><a href="#Outputs">Outputs</a></li></ul></li></ul><p>The following is a basic tutorial on how to set up the inputs to, and run, an analysis of a ducted fan in DuctAPE.</p><p>We begin by loading the package, and optionally create a shorthand name.</p><pre><code class="language-julia hljs">using DuctAPE
const dt = DuctAPE</code></pre><h2 id="Build-Inputs"><a class="docs-heading-anchor" href="#Build-Inputs">Build Inputs</a><a id="Build-Inputs-1"></a><a class="docs-heading-anchor-permalink" href="#Build-Inputs" title="Permalink"></a></h2><p>The next step is to create the input object of type <code>Propulsor</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.Propulsor-DuctAPE-tutorial" href="#DuctAPE.Propulsor-DuctAPE-tutorial"><code>DuctAPE.Propulsor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Propulsor(duct_coordinates, centerbody_coordinates, rotorstator_parameters, operating_point, paneling_constants, reference_parameters)</code></pre><p><strong>Arguments</strong></p><ul><li><code>duct_coordinates::AbstractMatrix</code> : The [z, r] coordinates of the duct geometry beginning at the inner (casing) side trailing edge and proceeding clockwise. Note that the duct geometry absolute radial position does not need to be included here if the <code>autoshiftduct</code> option is selected.</li><li><code>centerbody_coordinates::AbstractMatrix</code> : The [z, r] coordinates of the centerbody beginning at the leading edge and ending at the trailing edge. Note that the leading edge is assumed to be placed at a radial distance of 0.0 from the axis of rotation.</li><li><code>operating_point::OperatingPoint</code> : The operating point values.</li><li><code>paneling_constants::PanelingConstants</code> : Constants used in re-paneling the geometry.</li><li><code>rotorstator_parameters::RotorStatorParameters</code> : Rotor (and possibly stator) geometric paramters.</li><li><code>reference_parameters::ReferenceParameters</code> : Reference Parameters.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/inputs.jl#L163-L174">source</a></section></article><h3 id="Body-Geometry"><a class="docs-heading-anchor" href="#Body-Geometry">Body Geometry</a><a id="Body-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Body-Geometry" title="Permalink"></a></h3><p>We begin by defining a matrix of coordinates for the duct and another for the centerbody geometries, for example:</p><pre><code class="language-julia hljs">duct_coordinates = [
    0.304466  0.158439
    0.294972  0.158441
    0.28113   0.158423
    0.266505  0.158365
    0.251898  0.158254
    0.237332  0.158088
    0.222751  0.157864
    0.208123  0.157586
    0.193399  0.157258
    0.178507  0.156897
    0.16349   0.156523
    0.148679  0.156177
    0.134222  0.155902
    0.12      0.155721
    0.106044  0.155585
    0.092531  0.155498
    0.079836  0.155546
    0.067995  0.155792
    0.057025  0.156294
    0.046983  0.157103
    0.037937  0.158256
    0.029956  0.159771
    0.02311   0.161648
    0.017419  0.163862
    0.012842  0.166404
    0.009324  0.169289
    0.006854  0.172546
    0.005484  0.176154
    0.005242  0.180005
    0.006112  0.184067
    0.00809   0.188086
    0.011135  0.192004
    0.015227  0.19579
    0.020339  0.199393
    0.026403  0.202735
    0.033312  0.205736
    0.040949  0.208332
    0.049193  0.210487
    0.057935  0.212174
    0.067113  0.21339
    0.076647  0.214136
    0.086499  0.214421
    0.09661   0.214255
    0.10695   0.213649
    0.117508  0.212618
    0.12838   0.211153
    0.139859  0.209267
    0.151644  0.207051
    0.163586  0.204547
    0.175647  0.201771
    0.187807  0.198746
    0.20002   0.19549
    0.212269  0.192017
    0.224549  0.188335
    0.236794  0.18447
    0.249026  0.180416
    0.261206  0.176188
    0.273301  0.171796
    0.28524   0.16727
    0.29644   0.162842
    0.304542  0.159526
]</code></pre><pre><code class="language-julia hljs">centerbody_coordinates = [
    0.0       0.0
    0.000586  0.005293
    0.002179  0.010047
    0.004736  0.014551
    0.008231  0.018825
    0.012632  0.022848
    0.01788   0.026585
    0.023901  0.030001
    0.030604  0.033068
    0.0379    0.035771
    0.045705  0.038107
    0.053933  0.040075
    0.06254   0.04169
    0.071451  0.042966
    0.08063   0.043916
    0.090039  0.044561
    0.09968   0.044922
    0.109361  0.044999
    0.12      0.044952
    0.135773  0.04495
    0.151899  0.04493
    0.16806   0.044913
    0.184232  0.044898
    0.200407  0.044882
    0.21658   0.044866
    0.232723  0.044847
    0.248578  0.044839
    0.262095  0.044564
    0.274184  0.043576
    0.285768  0.041795
    0.296701  0.039168
    0.306379  0.035928
]</code></pre><img src="8f61d40e.svg" alt="Example block output"/><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The body geometry coordinates must be input as columns of z (axial) and r (radial) coordinates, in that order.</p></div></div><h3 id="Rotor-Geometry"><a class="docs-heading-anchor" href="#Rotor-Geometry">Rotor Geometry</a><a id="Rotor-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Rotor-Geometry" title="Permalink"></a></h3><p>The next step is to assemble an object of type <code>RotorStatorParameters</code> which contains the geometric information required to define the rotor(s) and their respective blade elements.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.RotorStatorParameters-DuctAPE-tutorial" href="#DuctAPE.RotorStatorParameters-DuctAPE-tutorial"><code>DuctAPE.RotorStatorParameters</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RotorStatorParameters(
    B, rotorzloc, r, Rhub, Rtip, chords, twists, tip_gap, airfoils, fliplift
)</code></pre><p>Composite type containing the rotor(s) geometric properties.</p><p>Note that the actual struct requires the inputs to be arrays, but there is a constructor function that will take in scalars and automatically build the array-based struct.</p><p><strong>Arguments</strong></p><ul><li><code>B::AbstractVector{Float}</code> : The number of blades for each rotor. May not be an integer, but usually is.</li><li><code>rotorzloc::AbstractVector{Float}</code> : Dimensional, axial position of each rotor.</li><li><code>r::AbstractArray{Float}</code> : Non-dimensional radial locations of each blade element.</li><li><code>Rhub::AbstractVector{Float}</code> : Dimensional hub radius of rotor. (may be changed if it does not match the radial position of the centerbody geometry at the selected <code>rotorzloc</code>.</li><li><code>Rtip::AbstractVector{Float}</code> : Dimensional tip radius of rotor. Is used to determine the radial position of the duct if the <code>autoshiftduct</code> option is selected.</li><li><code>chords::AbstractArray{Float}</code> : Dimensional chord lengths of the blade elements.</li><li><code>twists::AbstractArray{Float}</code> : Blade element angles, in radians.</li><li><code>tip_gap::AbstractVector{Float}</code> : Currently unused, do not set to anything other than zeros.</li><li><code>airfoils::AbstractArray{AFType}</code> : Airfoil types describing the airfoil polars for each blade element. Currently only fully tested with <code>C4Blade.DFDCairfoil</code> types.</li><li><code>fliplift::AbstractVector{Bool}</code> : flag to indicate if the airfoil lift values should be flipped or not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/inputs.jl#L97-L117">source</a></section></article><p>In this example, we have a single rotor defined as follows.</p><pre><code class="language-julia hljs">B = 5

rotorzloc = 0.12

Rtip = 0.15572081487373543

Rhub = 0.04495252299071941

r = [
    0.050491
    0.061567
    0.072644
    0.083721
    0.094798
    0.10587
    0.11695
    0.12803
    0.13911
    0.15018
]./Rtip

chords = [
    0.089142
    0.079785
    0.0713
    0.063979
    0.057777
    0.052541
    0.048103
    0.044316
    0.041061
    0.038243
]

twists = [
    69.012
    59.142
    51.825
    46.272
    41.952
    38.509
    35.699
    33.354
    31.349
    29.596
].*pi/180.0


afparams = DuctAPE.c4b.DFDCairfoil(;
    alpha0=0.0,
    clmax=1.5,
    clmin=-1.0,
    dclda=6.28,
    dclda_stall=0.5,
    dcl_stall=0.2,
    cdmin=0.012,
    clcdmin=0.1,
    dcddcl2=0.005,
    cmcon=0.0,
    Re_ref=2e5,
    Re_exp=0.35,
    mcrit=0.7,
)

airfoils = fill(afparams, length(r)) # specify the airfoil array

rotorstator_parameters = dt.RotorStatorParameters(
    [B],
    [rotorzloc],
    r,
    [Rhub],
    [Rtip],
    chords,
    twists,
    [0.0], # currently only zero tip gaps work.
    airfoils,
    [0.0], # can flip the cl lookups on the fly if desired, say, for stator sections
)</code></pre><img src="21729a85.svg" alt="Example block output"/><div class="admonition is-info"><header class="admonition-header">Airfoils</header><div class="admonition-body"><p>Airfoil types for DuctAPE are currently contained in the C4Blade (Cascade Compatible <a href="https://flow.byu.edu/CCBlade.jl/stable/">CCBlade</a>) sub-module of DuctAPE which is exported as <code>c4b</code> and also contains the various airfoil evaluation functions used for the blade element lookups. The available airfoil types include all the airfoil types from CCBlade, as well as <code>DFDCairfoil</code> which is an <a href="https://web.mit.edu/drela/Public/web/xrotor/">XROTOR</a>-like parametric cascade polar used in DFDC. In addition there are untested cascade types with similar structure to CCBlades airfoil types called <code>DTCascade</code>. Furthermore, there is an experimental actuator disk model implemented via the <code>ADM</code> airfoil type in C4Blade.</p></div></div><h3 id="Operating-Point"><a class="docs-heading-anchor" href="#Operating-Point">Operating Point</a><a id="Operating-Point-1"></a><a class="docs-heading-anchor-permalink" href="#Operating-Point" title="Permalink"></a></h3><p>Next we will assemble the operating point which contains information about the freestream as well as the rotor rotation rate(s).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.OperatingPoint-DuctAPE-tutorial" href="#DuctAPE.OperatingPoint-DuctAPE-tutorial"><code>DuctAPE.OperatingPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">OperatingPoint(Vinf, rhoinf, muinf, asound, Omega)</code></pre><p>Propulsor operating point information.</p><p>Note that the actual struct requires the inputs to be arrays, but there is a constructor function that will take in scalars and automatically build the array-based struct.</p><p>Also note that even though each field is required to be a vector, only <code>Omega</code> should have more than one entry, and only then if there are more than one rotor.  The purpose behind having vector rather than constant scalar inputs here is for ease of redefinition in an optimization setting when freestream design variables may be present.</p><p><strong>Arguments</strong></p><ul><li><code>Vinf::AbstractVector{Float}</code> : Freestream velocity magnitude (which is only in the axial direction).</li><li><code>rhoinf::AbstractVector{Float}</code> : Freestream density</li><li><code>muinf::AbstractVector{Float}</code> : Freestream viscosity</li><li><code>asound::AbstractVector{Float}</code> : Freestream speed of sound</li><li><code>Omega::AbstractVector{Float}</code> : Rotor rototation rate(s)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/inputs.jl#L1-L17">source</a></section></article><pre><code class="language-julia hljs"># Freestream
Vinf = 0.0 # hover condition
rhoinf = 1.226
asound = 340.0
muinf = 1.78e-5

# Rotation Rate
RPM = 8000.0
Omega = RPM * pi / 30 # if using RPM, be sure to convert to rad/s

# utilizing the constructor function to put things in vector types
operating_point = dt.OperatingPoint(Vinf, rhoinf, muinf, asound, Omega)</code></pre><h3 id="Paneling-Constants"><a class="docs-heading-anchor" href="#Paneling-Constants">Paneling Constants</a><a id="Paneling-Constants-1"></a><a class="docs-heading-anchor-permalink" href="#Paneling-Constants" title="Permalink"></a></h3><p>The <code>PanelingConstants</code> object contains the constants required for DuctAPE to re-panel the provided geometry into a format compatible with the solve structure. The <code>PanelingConstants</code> object is also used to build all of the preallocated caches inside DuctAPE, which can be done up-front if desired. Note that there is some functionality in place for cases when the user wants to keep their own specified geometry, but this functionality should be used with caution and only by users who are certain their provided geometry is in the compatible format.  See the <a href="../examples/#Circumventing-the-Automated-Geometry-Re-paneling">Examples</a> for an example.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.PanelingConstants-DuctAPE-tutorial" href="#DuctAPE.PanelingConstants-DuctAPE-tutorial"><code>DuctAPE.PanelingConstants</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PanelingConstants(
    nduct_inlet,
    ncenterbody_inlet,
    npanels,
    dte_minus_cbte,
    nwake_sheets,
    wake_length=1.0,
)</code></pre><p>Constants used in re-paneling geometry.</p><p>Note that unlike other input structures, this one, in general, does not define fields as vectors.  This is because these values should not change throughout an optimization, even if the geometry may change.  Otherwise, discontinuities could be experienced.</p><p><strong>Arguments</strong></p><ul><li><code>nduct_inlet::Int</code> : The number of panels to use for the duct inlet (this number is used for both the casing and nacelle re-paneling)</li><li><code>ncenterbody_inlet::Int</code> : The number of panels to use for the centerbody inlet.</li><li><code>npanels::AbstractVector{Int}</code> : A vector containing the number of panels between discrete locations inside the wake. Specifically, the number of panels between the rotors, between the last rotor and the first body trailing edge, between the body trailing edges (if different), and between the last body trailing edge and the end of the wake.  The length of this vector should be N+1 (where N is the number of rotors) if the duct and centerbody trailing edges are aligned, and N+2 if not.</li><li><code>dte_minus_cbte::Float</code> : An indicator concerning the hub and duct trailing edge relative locations. Should be set to -1 if the duct trailing edge axial position minus the centerbody trailing edge axial position is negative, +1 if positive (though any positive or negative number will suffice), and zero if the trailing edges are aligned.</li><li><code>nwake_sheets::Int</code> : The number of wake sheets to use. Note this will also be setting the number of blade elements to use.</li><li><code>wake_length::Float=1.0</code> : Non-dimensional (based on the length from the foremost body leading edge and the aftmost body trailing edge) length of the wake extending behind the aftmost body trailing edge.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/inputs.jl#L65-L87">source</a></section></article><pre><code class="language-julia hljs">nduct_inlet = 30
ncenterbody_inlet = 30
npanels = [30, 1, 30] # the 1 is due to the fact that the duct and center body trailing edges are not quite aligned.
dte_minus_cbte = -1.0 # the duct trailing edge is ahead of the centerbody trailing edge.
nwake_sheets = 11
wake_length = 0.8

paneling_constants = dt.PanelingConstants(
    nduct_inlet, ncenterbody_inlet, npanels, dte_minus_cbte, nwake_sheets, wake_length
)</code></pre><h3 id="Reference-Parameters"><a class="docs-heading-anchor" href="#Reference-Parameters">Reference Parameters</a><a id="Reference-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Reference-Parameters" title="Permalink"></a></h3><p>The reference parameters are used in the post-processing non-dimensionalizations.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.ReferenceParameters-DuctAPE-tutorial" href="#DuctAPE.ReferenceParameters-DuctAPE-tutorial"><code>DuctAPE.ReferenceParameters</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ReferenceParameters(Vref, Rref)</code></pre><p>Reference parameters for post-process non-dimensionalization.</p><p>Note that the actual struct requires the inputs to be arrays, but there is a constructor function that will take in scalars and automatically build the array-based struct.</p><p><strong>Arguments</strong></p><ul><li><code>Vref::AbstractVector{Float}</code> : Reference velocity.</li><li><code>Rref::AbstractVector{Float}</code> : Reference rotor tip radius.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/inputs.jl#L42-L53">source</a></section></article><pre><code class="language-julia hljs">Vref = 50.0 #this turns out to be close to the average axial velocity at the rotor in our case
Rref = Rtip

reference_parameters = dt.ReferenceParameters([Vref], [Rref])</code></pre><h3 id="All-Together"><a class="docs-heading-anchor" href="#All-Together">All Together</a><a id="All-Together-1"></a><a class="docs-heading-anchor-permalink" href="#All-Together" title="Permalink"></a></h3><p>We are now posed to construct the <code>Propulsor</code> input type.</p><pre><code class="language-julia hljs">propulsor = dt.Propulsor(
    duct_coordinates,
    centerbody_coordinates,
    rotorstator_parameters,
    operating_point,
    paneling_constants,
    reference_parameters,
)</code></pre><h2 id="Set-Options"><a class="docs-heading-anchor" href="#Set-Options">Set Options</a><a id="Set-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Set-Options" title="Permalink"></a></h2><p>The default options should be sufficient for just starting out and are set through the <code>set_options</code> function.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.set_options-DuctAPE-tutorial" href="#DuctAPE.set_options-DuctAPE-tutorial"><code>DuctAPE.set_options</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_options(; kwargs...)
set_options(multipoint; kwargs...)</code></pre><p>Set the options for DuctAPE to use.</p><p>Note that the vast majority of the available options are defined through keyword arguments.  See the documentation for the various option types for more information.</p><p><strong>Arguments</strong></p><ul><li><code>multipoint::AbstractVector{OperatingPoint}</code> : a vector of operating points to use if running a multi-point analysis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/utilities/options.jl#L560-L570">source</a></section></article><pre><code class="language-julia hljs">options = dt.set_options()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Options{Bool, Vector{Bool}, Float64, Vector{Int64}, Vector{String}, Vector{String}, typeof(FLOWMath.akima), IntegrationOptions{GaussLegendre{Vector{Float64}, Vector{Float64}}, GaussLegendre{Vector{Float64}, Vector{Float64}}}, ChainSolverOptions{Bool, DuctAPE.ExternalSolverOptions}, GridSolverOptions{Bool, Float64, Int64, Symbol}}(false, true, [1], FLOWMath.akima, true, false, 0.05, 1.0e-15, 2.220446049250313e-15, IntegrationOptions{GaussLegendre{Vector{Float64}, Vector{Float64}}, GaussLegendre{Vector{Float64}, Vector{Float64}}}(GaussLegendre{Vector{Float64}, Vector{Float64}}([0.019855071751231856, 0.10166676129318664, 0.2372337950418355, 0.4082826787521751, 0.591717321247825, 0.7627662049581645, 0.8983332387068134, 0.9801449282487682], [0.05061426814518838, 0.11119051722668723, 0.15685332293894372, 0.18134189168918097, 0.18134189168918097, 0.15685332293894372, 0.11119051722668723, 0.05061426814518838]), GaussLegendre{Vector{Float64}, Vector{Float64}}([0.019855071751231856, 0.10166676129318664, 0.2372337950418355, 0.4082826787521751, 0.591717321247825, 0.7627662049581645, 0.8983332387068134, 0.9801449282487682], [0.05061426814518838, 0.11119051722668723, 0.15685332293894372, 0.18134189168918097, 0.18134189168918097, 0.15685332293894372, 0.11119051722668723, 0.05061426814518838])), Bool[0], [&quot;outputs.jl&quot;], false, [&quot;outs&quot;], GridSolverOptions{Bool, Float64, Int64, Symbol}(20, 1.0e-14, :newton, :forward, Bool[0]), ChainSolverOptions{Bool, DuctAPE.ExternalSolverOptions}(DuctAPE.ExternalSolverOptions[NLsolveOptions{Bool, Float64, Int64, UnionAll, @NamedTuple{}, Symbol}(:anderson, 1.0e-12, 100, LineSearches.MoreThuente, NamedTuple(), Bool[0]), MinpackOptions{Bool, Float64, Int64, Symbol}(:hybr, 1.0e-12, 100, Bool[0]), NonlinearSolveOptions{UnionAll, Bool, Float64, Int64, @NamedTuple{autodiff::ADTypes.AutoForwardDiff{nothing, Nothing}}}(SimpleNonlinearSolve.SimpleNewtonRaphson, (autodiff = ADTypes.AutoForwardDiff{nothing, Nothing}(nothing),), 1.0e-12, 25, Bool[0])], Bool[0]))</code></pre><p>For more advanced option selection, see the examples and API reference.</p><h2 id="Run-Analysis"><a class="docs-heading-anchor" href="#Run-Analysis">Run Analysis</a><a id="Run-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Run-Analysis" title="Permalink"></a></h2><p>With the propulsor input build, and the options selected, we are now ready to run an analysis. This is done simply with the <code>analyze</code> function which dispatches the appropriate analysis, solve, and post-processing functions based on the selected options.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.analyze-Tuple{Propulsor, Options}-DuctAPE-tutorial" href="#DuctAPE.analyze-Tuple{Propulsor, Options}-DuctAPE-tutorial"><code>DuctAPE.analyze</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">analyze(
    propulsor::Propulsor,
    options::Options=set_options();
    prepost_container_caching=nothing,
    solve_parameter_caching=nothing,
    solve_container_caching=nothing,
    return_inputs=false,
)</code></pre><p>Analyze propulsor, including preprocessing.</p><p><strong>Arguments</strong></p><ul><li><code>propulsor::Propulsor</code> : Propulsor input object (see docstring for <code>Propulsor</code> type)</li><li><code>options::Options=set_options()</code> : Options object (see <code>set_options</code> and related functions)</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>prepost_container_caching=nothing</code> : Output of <code>allocate_prepost_container_cache</code></li><li><code>solve_parameter_caching=nothing</code> : Output of <code>allocate_solve_parameter_container_cache</code></li><li><code>solve_container_caching=nothing</code> : Output of <code>allocate_solve_container_cache</code></li><li><code>return_inputs=false</code> : flag as to whether or not to return the pre-processed inputs</li></ul><p><strong>Returns</strong></p><ul><li><code>outs::NamedTuple</code> : Named Tuple of various analysis outputs (see docstring for postprocess for details), note, if linear system decomposition fails, no solve is performed and an empty vector is returned.</li><li><code>ins::NamedTuple</code> : Named Tuple of various pre-processed inputs (e.g. panels and body linear system), will only be returned if <code>return_inputs=true</code></li><li><code>convergence_flag</code> : Flag for successful solve convergence</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/13e97c12c50c36eabfd97926094ff3d5b7bdeb2d/src/analysis/analyses.jl#L1-L27">source</a></section></article><pre><code class="language-julia hljs">outs, success_flag = dt.analyze(propulsor, options)</code></pre><h2 id="Outputs"><a class="docs-heading-anchor" href="#Outputs">Outputs</a><a id="Outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Outputs" title="Permalink"></a></h2><p>There are many outputs contained in the named tuple output from the <code>analyze</code> function (see the <a href="../private_api/#DuctAPE.post_process">post_process() docstring</a>), but some that may be of immediate interest include:</p><pre><code class="language-julia hljs"># Total Thrust Coefficient
outs.totals.CT</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.9693508953206749</code></pre><pre><code class="language-julia hljs"># Total Torque Coefficient
outs.totals.CQ</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.10306885066514823</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Thursday 25 April 2024 20:04">Thursday 25 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
