<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Preprocess · DuctAPE.jl</title><meta name="title" content="Preprocess · DuctAPE.jl"/><meta property="og:title" content="Preprocess · DuctAPE.jl"/><meta property="twitter:title" content="Preprocess · DuctAPE.jl"/><meta name="description" content="Documentation for DuctAPE.jl."/><meta property="og:description" content="Documentation for DuctAPE.jl."/><meta property="twitter:description" content="Documentation for DuctAPE.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="DuctAPE.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">DuctAPE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">DuctAPE</span><ul><li><a class="tocitem" href="../../tutorial/">Getting Started</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Advanced Usage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../advanced_usage/option/">Options</a></li><li><a class="tocitem" href="../../advanced_usage/precompilation/">Preallocation</a></li><li><a class="tocitem" href="../../advanced_usage/outputs/">Outputs</a></li></ul></li><li><a class="tocitem" href="../../visualization/">Visualization</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../public_api/">Public API Reference</a></li><li><input class="collapse-toggle" id="menuitem-2-4-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4-2"><span class="docs-label">Private API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../private_prelims/">Prelims</a></li><li class="is-active"><a class="tocitem" href>Preprocess</a><ul class="internal"><li><a class="tocitem" href="#General"><span>General</span></a></li><li><a class="tocitem" href="#Geometry"><span>Geometry</span></a></li><li><a class="tocitem" href="#Induced-Velocities"><span>Induced Velocities</span></a></li><li><a class="tocitem" href="#State-Initialization"><span>State Initialization</span></a></li></ul></li><li><a class="tocitem" href="../private_process/">Process</a></li><li><a class="tocitem" href="../private_postprocess/">Postprocess</a></li><li><a class="tocitem" href="../private_utilities/">Utilities</a></li></ul></li><li><a class="tocitem" href="../api_index/">API Index</a></li></ul></li><li><a class="tocitem" href="../../theory/">Theory</a></li></ul></li><li><span class="tocitem">C<span>$^4$</span>Blade</span><ul><li><a class="tocitem" href="../../../C4Blade/intro/">Intro</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Blade Element Types</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../C4Blade/airfoil_types/DFDC/">DFDC Airfoil Type</a></li><li><a class="tocitem" href="../../../C4Blade/airfoil_types/CCBlade/">CCBlade Airfoil Types</a></li><li><a class="tocitem" href="../../../C4Blade/airfoil_types/actuator_disk/">Actuator Disk Type</a></li><li><a class="tocitem" href="../../../C4Blade/airfoil_types/cascade/">Cascade Types</a></li></ul></li><li><a class="tocitem" href="../../../C4Blade/corrections/">Polar Modification</a></li><li><a class="tocitem" href="../../../C4Blade/api/">API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">DuctAPE</a></li><li><a class="is-disabled">API</a></li><li><a class="is-disabled">Private API Reference</a></li><li class="is-active"><a href>Preprocess</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Preprocess</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/byuflowlab/DuctAPE.jl/blob/{commit}{path}#L{line}" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/byuflowlab/DuctAPE.jl/blob/main/docs/src/DuctAPE/api/private_preprocess.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><ul><li class="no-marker"><ul><li><a href="#General">General</a></li><li><a href="#Geometry">Geometry</a></li><li class="no-marker"><ul><li><a href="#Wake">Wake</a></li><li><a href="#Bodies">Bodies</a></li><li><a href="#Rotors">Rotors</a></li></ul></li><li><a href="#Induced-Velocities">Induced Velocities</a></li><li class="no-marker"><ul><li><a href="#Unit-Induced-Velocities">Unit Induced Velocities</a></li><li><a href="#Unit-Induced-Velocity-Matrices">Unit Induced Velocity Matrices</a></li><li><a href="#Panel-Method-Velocity-Functions">Panel Method Velocity Functions</a></li><li><a href="#Quadrature">Quadrature</a></li><li class="no-marker"><ul><li><a href="#Integrands">Integrands</a></li><li><a href="#Integrals">Integrals</a></li></ul></li></ul></li><li><a href="#State-Initialization">State Initialization</a></li></ul></li></ul><h2 id="General"><a class="docs-heading-anchor" href="#General">General</a><a id="General-1"></a><a class="docs-heading-anchor-permalink" href="#General" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.set_index_maps" href="#DuctAPE.set_index_maps"><code>DuctAPE.set_index_maps</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_index_maps(
    npanels,
    ncenterbody_inlet,
    nwake_sheets,
    dte_minus_cbte,
    wnm,
    wenids,
    nwp,
    nwsp,
    nbn,
    ndp,
    riiw,
    nrotor,
)</code></pre><p>Set values for index map to be used throughout solve and post-process.</p><p><strong>Arguments</strong></p><ul><li><code>npanels : paneling_constants.npanels</code></li><li><code>ncenterbody_inlet : paneling_constants.ncenterbody_inlet</code></li><li><code>nwake_sheets : paneling_constants.nwake_sheets</code></li><li><code>dte_minus_cbte : paneling_constants.dte_minus_cbte</code></li><li><code>wnm : wake_vortex_panels.nodemap</code></li><li><code>wenids : wake_vortex_panels.endnodeidxs</code></li><li><code>nwp :  problem_dimensions.nwp</code></li><li><code>nwsp : problem_dimensions.nwsp</code></li><li><code>nbn : problem_dimensions.nbn</code></li><li><code>ndp : body_vortex_panels.npanel[1]</code></li><li><code>riiw : rotor_indices_in_wake</code></li><li><code>nrotor : problem_dimensions.nrotor</code></li></ul><p><strong>Returns</strong></p><ul><li><code>idmaps::NamedTuple</code> : A named tuple containing index mapping used in bookkeeping throughout solve and post-process</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L919-L953">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.precompute_parameters" href="#DuctAPE.precompute_parameters"><code>DuctAPE.precompute_parameters</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">precompute_parameters(
    ducted_rotor,
    operating_point;
    grid_solver_options=GridSolverOptions(),
    integration_options=IntegrationOptions(),
    autoshiftduct=true,
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    finterp=(x,y,xp)-&gt;FLOWMath.akima(x,y,xp,2.0*eps(),eps()),
    silence_warnings=true,
    verbose=false,
)</code></pre><p>Out of place main pre-processing function that computes all the required parameters for the solve.</p><p><strong>Arguments</strong></p><ul><li><code>ducted_rotor::DuctedRotor</code> : A DuctedRotor object</li><li><code>operating_point::OperatingPoint</code> : A OperatingPoint object</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>grid_solver_options::GridSolverOptionsType=GridSolverOptions()</code> : A GridSolverOptionsType object</li><li><code>integration_options::IntegrationMethod=IntegrationOptions()</code> : An IntegrationMethod object</li><li><code>autoshiftduct::Bool=true</code> : flag to shift duct geometry based on rotor tip radius</li><li><code>itcpshift::Float=0.05</code> : value used in positioning the internal pseudo control point in the solid bodies. Default is DFDC hard-coded value.</li><li><code>axistol::Float=1e-15</code> : tolerance for how close to the axis of rotation to be considered on the axis.</li><li><code>tegaptol::Float=1e1 * eps()</code> : tolerance for how large of a trailing edge gap is considered a gap.</li><li><code>finterp::Function=FLOWMath.akima</code> : interpolation method for re-interpolating body coordinates</li><li><code>silence_warnings::Bool=true</code> : flag to silence warnings</li><li><code>verbose::Bool=false</code> : flag to print verbose statements</li></ul><p><strong>Returns</strong></p><ul><li><code>ivr::NamedTuple</code> : A named tuple containing arrays of induced velocities on the rotors</li><li><code>ivw::NamedTuple</code> : A named tuple containing arrays of induced velocities on the wake</li><li><code>ivb::NamedTuple</code> : A named tuple containing arrays of induced velocities on the bodies</li><li><code>linsys::NamedTuple</code> : A named tuple containing cacheable data for the linear system, including:<ul><li><code>A_bb::Array{Float}</code> : AIC (LHS) matrix for the panel method system</li><li><code>b_bf::Array{Float}</code> : Initial system RHS vector based on freestrem magnitude</li><li><code>A_br::Array{Float}</code> : Unit normal velocity from rotors onto body panels</li><li><code>A_pr::Array{Float}</code> : Unit normal velocity from rotors onto body internal psuedo control points</li><li><code>A_bw::Array{Float}</code> : Unit normal velocity from wake onto body panels</li><li><code>A_pw::Array{Float}</code> : Unit normal velocity from wake onto body internal psuedo control points</li></ul></li><li><code>A_bb_LU::LinearAlgebra.LU</code> : LinearAlgebra LU factorization of the LHS matrix</li><li><code>lu_decomp_flag::Vector{Bool}</code> : flag for whether factorization was successful</li><li><code>blade_elements::NamedTuple</code> : A named tuple containing cacheable blade element information (see docs for <code>interpolate_blade_elements</code>)</li><li><code>airfoils::Vector{AFType}</code> : A matrix of airfoil types associated with each of the blade elements</li><li><code>wakeK::Matrix{Float}</code> : A matrix of precomputed geometric constants used in the calculation of the wake vortex strengths</li><li><code>idmaps::NamedTuple</code> : A named tuple containing index mapping used in bookkeeping throughout solve and post-process</li><li><code>panels::NamedTuple</code> : A named tuple of panel objects including:<ul><li><code>body_vortex_panels::NamedTuple</code> : the named tuple containing the body vortex panel information</li><li><code>rotor_source_panels::NamedTuple</code> : the named tuple containing the rotor source panel information</li><li><code>wake_vortex_panels::NamedTuple</code> : the named tuple containing the wake vortex panel information</li></ul></li><li><code>problem_dimensions::ProblemDimensions</code> : A ProblemDimensions object</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L1133-L1187">source</a></section><section><div><pre><code class="language-julia hljs">precompute_parameters(
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    wake_grid,
    rotor_indices_in_wake,
    Rtips,
    Rhubs,
    rotor,
    paneling_constants,
    operating_point,
    integration_options,
    problem_dimensions=nothing;
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    silence_warnings=true,
    verbose=false,
)</code></pre><p>An alternate version of precompute_parameters allowing for user defined geometry that does not go through a re-panling step (use with caution).</p><p>The first inputs are the outputs of the <code>reinterpolate_geometry</code> and <code>get_blade_ends_from_body_geometry</code> functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L1265-L1288">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.precompute_parameters!" href="#DuctAPE.precompute_parameters!"><code>DuctAPE.precompute_parameters!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">precompute_parameters!(
    ivr,
    ivw,
    blade_element_cache,
    linsys,
    wakeK,
    ducted_rotor,
    operating_point,
    prepost_containers,
    problem_dimensions;
    grid_solver_options=GridSolverOptions(),
    integration_options=IntegrationOptions(),
    autoshiftduct=true,
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    finterp=(x,y,xp)-&gt;FLOWMath.akima(x,y,xp,2.0*eps(),eps()),
    silence_warnings=true,
    verbose=false,
)</code></pre><p>In-place version of <code>precompute_parameters</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L1389-L1412">source</a></section><section><div><pre><code class="language-julia hljs">precompute_parameters!(
    ivr,
    ivw,
    blade_element_cache,
    linsys,
    wakeK,
    wake_grid,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    rotor_indices_in_wake,
    rotor,
    paneling_constants,
    operating_point,
    prepost_containers,
    problem_dimensions=nothing;
    integration_options=IntegrationOptions(),
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    finterp=(x,y,xp)-&gt;FLOWMath.akima(x,y,xp,2.0*eps(),eps()),
    silence_warnings=true,
    verbose=false,
)</code></pre><p>In-place version of the <code>precompute_parameters</code> function by-passing the geometry reinterpolateion. (Use with caution)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L1505-L1531">source</a></section></article><h2 id="Geometry"><a class="docs-heading-anchor" href="#Geometry">Geometry</a><a id="Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.reinterpolate_geometry" href="#DuctAPE.reinterpolate_geometry"><code>DuctAPE.reinterpolate_geometry</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reinterpolate_geometry(
    problem_dimensions,
    duct_coordinates,
    centerbody_coordinates,
    rotor,
    paneling_constants;
    autoshiftduct=true,
    grid_solver_options=GridSolverOptions(),
    finterp=(x,y,xp)-&gt;FLOWMath.akima(x,y,xp,2.0*eps(),eps()),
    verbose=false,
    silence_warnings=true,
)</code></pre><p>Re-interpolate the body geometry and return compatible body and way geometry.</p><p><strong>Arguments</strong></p><ul><li><code>problem_dimensions::ProblemDimensions</code> : A ProblemDimensions object</li><li><code>duct_coordinates::Matrix{Float}</code> : [z,r] coordinates of duct geometry</li><li><code>centerbody_coordinates::Matrix{Float}</code> : [z,r] coordinates of centerbody geometry</li><li><code>rotor::Rotor</code> : A Rotor object</li><li><code>paneling_constants::PanelingConstants</code> : A PanelingConstants object</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>autoshiftduct::Bool=true</code> : flag to shift duct geometry based on rotor tip radius</li><li><code>grid_solver_options::SolverOptionsType=GridSolverOptions()</code> : options for the wake grid position solver</li><li><code>finterp::Function=FLOWMath.akima</code> : interpolation method for re-interpolating body coordinates</li><li><code>verbose::Bool=false</code> : flag to print verbose statements</li><li><code>silence_warnings::Bool=true</code> : flag to silence warnings</li></ul><p><strong>Returns</strong></p><ul><li><code>wake_grid::Array{Float}</code> : array containig the z and r elliptic grid points defning the wake geometry.</li><li><code>rp_duct_coordinates::Matrix{Float}</code> : matrix containing the re-paneled duct coordinates</li><li><code>rp_centerbody_coordinates::Matrix{Float}</code> : matrix containing the re-paneled centerbody coordinates</li><li><code>rotor_indices_in_wake::Vector{Int}</code> : vector containing the indices of where in the wake the rotors reside (used later to define the rotor panel edges).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L1-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.reinterpolate_geometry!" href="#DuctAPE.reinterpolate_geometry!"><code>DuctAPE.reinterpolate_geometry!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reinterpolate_geometry!(
    wake_grid,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    rotor_indices_in_wake,
    duct_coordinates,
    centerbody_coordinates,
    rotor,
    blade_element_cache,
    paneling_constants;
    autoshiftduct=true,
    grid_solver_options=GridSolverOptions(),
    finterp=(x,y,xp)-&gt;FLOWMath.akima(x,y,xp,2.0*eps(),eps()),
    verbose=false,
    silence_warnings=true,
)</code></pre><p>In-place version of <code>reinterpolate_geometry</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L97-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_all_panels" href="#DuctAPE.generate_all_panels"><code>DuctAPE.generate_all_panels</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_all_panels(
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    nwake_sheets,
    rotor_indices_in_wake,
    rotorzloc,
    wake_grid;
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    silence_warnings=true,
)</code></pre><p>Function that calls all of the various panel generation functions are returns a named tuple containing all the panels</p><p><strong>Arguments</strong></p><ul><li><code>rp_duct_coordinates::Matrix{Float}</code> : matrix containing the re-paneled duct coordinates</li><li><code>rp_centerbody_coordinates::Matrix{Float}</code> : matrix containing the re-paneled centerbody coordinates</li><li><code>nwake_sheets::Int</code> : number of wake sheets</li><li><code>rotor_indices_in_wake::Vector{Int}</code> : vector containing the indices of where in the wake the rotors reside (used later to define the rotor panel edges).</li><li><code>rotorzloc:Vector{Float}</code> : axial locations of rotor lifting lines (contained in Rotor)</li><li><code>wake_grid::Array{Float}</code> : array containig the z and r elliptic grid points defning the wake geometry.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>itcpshift::Float=0.05</code> : value used in positioning the internal pseudo control point in the solid bodies. Default is DFDC hard-coded value.</li><li><code>axistol::Float=1e-15</code> : tolerance for how close to the axis of rotation to be considered on the axis.</li><li><code>tegaptol::Float=1e1 * eps()</code> : tolerance for how large of a trailing edge gap is considered a gap.</li><li><code>silence_warnings::Bool=true</code> : flag to silence warnings</li></ul><p><strong>Returns</strong></p><ul><li><code>panels::NamedTuple</code> : A named tuple of named tuples containing paneling information, including:<ul><li><code>body_vortex_panels::NamedTuple</code></li><li><code>rotor_source_panels::NamedTuple</code></li><li><code>wake_vortex_panels::NamedTuple</code></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L222-L257">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_all_panels!" href="#DuctAPE.generate_all_panels!"><code>DuctAPE.generate_all_panels!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_all_panels!(
    panels,
    wake_grid,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    rotor_indices_in_wake,
    rotorzloc,
    nwake_sheets;
    itcpshift=0.05,
    axistol=1e-15,
    tegaptol=1e1 * eps(),
    silence_warnings=true,
)</code></pre><p>In-place version of <code>generate_all_panels</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L291-L307">source</a></section></article><h3 id="Wake"><a class="docs-heading-anchor" href="#Wake">Wake</a><a id="Wake-1"></a><a class="docs-heading-anchor-permalink" href="#Wake" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.discretize_wake" href="#DuctAPE.discretize_wake"><code>DuctAPE.discretize_wake</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">discretize_wake(
    duct_coordinates,
    centerbody_coordinates,
    rotorzloc, # rotor axial locations
    wake_length,
    npanels,
    dte_minus_cbte;
)</code></pre><p>Calculate wake sheet panel node z-coordinates.</p><p><strong>Arguments</strong></p><ul><li><code>duct_coordinates::Matrix{Float}</code> : Array of input duct coordinates</li><li><code>centerbody_coordinates::Matrix{Float}</code> : Array of input centerbody_coordinates coordinates</li><li><code>rotorzloc ::Vector{Float}</code> : rotor axial locations</li><li><code>wake_length::Float</code> : non-dimensional length of wake to extend beyond aft-most body trailing edge.</li><li><code>npanels::Vector{Int}</code> : A vector of the number of panels between each discrete point.  For example: [number of panels between the rotors; number of panels between the stator and the first trailing edge; number of panels between the trailing edges; number of panels between the last trailing edge and the end of the wake]</li><li><code>dte_minus_cbte::Float</code> : indicator as to whether the duct trailing edge minus the centerbody trailing edge is positive, zero, or negative.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_wake_grid" href="#DuctAPE.generate_wake_grid"><code>DuctAPE.generate_wake_grid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_wake_grid(
    problem_dimensions,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    Rhub1,
    Rtip1,
    tip_gap1,
    zwake;
    grid_solver_options=GridSolverOptions(),
    verbose=false,
    silence_warnings=true,
)</code></pre><p>Initialize and solve for elliptic grid on which wake sheets are defined.</p><p><strong>Arguments</strong></p><ul><li><code>problem_dimensions::</code> : A ProblemDimensions object</li><li><code>rp_duct_coordinates::</code> : repaneled duct coordinates</li><li><code>rp_centerbody_coordinates::</code> : repaneled centerbody coordinates</li><li><code>Rhub1::</code> : Hub radius of first rotor</li><li><code>Rtip1::</code> : Tip radius of first rotor</li><li><code>tip_gap1::</code> : Tip gap of first rotor (MUST BE ZERO for now)</li><li><code>zwake::</code> : axial positions of wake sheet panel nodes</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>grid_solver_options::GridSolverOptionsType=GridSolverOptions()</code> : options for solving the elliptic grid.</li><li><code>verbose::Bool=false</code> : flag to print verbose statements</li><li><code>silence_warnings::Bool=true</code> : flag to supress warnings</li></ul><p><strong>Returns</strong></p><ul><li><code>wake_grid::Array{Float,3}</code> : 3D Array of axial and radial wake_grid points after solution of elliptic system.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L220-L252">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_wake_grid!" href="#DuctAPE.generate_wake_grid!"><code>DuctAPE.generate_wake_grid!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_wake_grid!(
    wake_grid,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    Rhub1,
    Rtip1,
    tip_gap1,
    zwake;
    grid_solver_options=grid_solver_options,
    verbose=false,
    silence_warnings=true,
)</code></pre><p>In-place version of <code>generate_wake_grid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L288-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_wake_grid" href="#DuctAPE.initialize_wake_grid"><code>DuctAPE.initialize_wake_grid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_wake_grid(rp_duct_coordinates, rp_centerbody_coordinates, zwake, rwake)</code></pre><p>Initialize the wake grid.</p><p><strong>Arguments:</strong></p><ul><li><code>rp_duct_coordinates::Matrix{Float}</code> : The re-paneled duct coordinates</li><li><code>rp_centerbody_coordinates::Matrix{Float}</code> : The re-paneled centerbody coordinates</li><li><code>zwake::Vector{Float}</code> : The axial positions of the wake sheet panel nodes</li><li><code>rwake::Vector{Float}</code> : The radial positions of the blade elements for the foremost rotor</li></ul><p><strong>Returns:</strong></p><ul><li><code>wake_grid::Array{Float,3}</code> : 3D Array of axial and radial wake_grid points</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L105-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_wake_grid!" href="#DuctAPE.initialize_wake_grid!"><code>DuctAPE.initialize_wake_grid!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_wake_grid!(
    wake_grid, rp_duct_coordinates, rp_centerbody_coordinates, zwake, rwake
)</code></pre><p>In-place version of <code>initialize_wake_grid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L141-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.relax_grid!" href="#DuctAPE.relax_grid!"><code>DuctAPE.relax_grid!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relax_grid!(
    grid_solver_options::GridSolverOptionsType,
    wake_grid;
    verbose=false,
    silence_warnings=true,
    tabchar=&quot;    &quot;,
    ntab=1,
)</code></pre><p>Relax/Solve initial wake grid according to elliptic system of equations.</p><p><strong>Arguments</strong></p><ul><li>`grid<em>solver</em>options::GridSolverOptionsType&#39; : options for elliptic grid solver</li><li><code>wake_grid::Array{Float,3}</code> : Initialized wake grid</li></ul><p><strong>Keyword Arguments</strong></p><ul><li>`verbose=false::&#39; : flag for printing verbose statements</li><li>`silence_warnings=true::&#39; : flag for supressing warnings</li><li>`tabchar::String=&quot;    &quot;::&#39; : string to use for tabbing over verbose statements.</li><li>`ntab::Int=1&#39; : number of tabs for printing verbose statements</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L341-L362">source</a></section><section><div><pre><code class="language-julia hljs">relax_grid!(xg, rg, nxi, neta; iteration_limit, atol)</code></pre><p>Relax wake<em>grid using elliptic wake</em>grid solver.</p><p><strong>Arguments:</strong></p><ul><li><code>wake_grid::Array{Float}</code> : initial guess for grid points.</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>iteration_limit::Int</code> : maximum number of iterations to run, default=100</li><li><code>atol::Float</code> : convergence tolerance, default = 1e-9</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L524-L535">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.solve_elliptic_grid!" href="#DuctAPE.solve_elliptic_grid!"><code>DuctAPE.solve_elliptic_grid!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solve_elliptic_grid!(
    wake_grid;
    algorithm=:trust_region,
    autodiff=:forward,
    atol=1e-14,
    iteration_limit=10,
    converged=[false],
    residual_value=[0.0],
    verbose=false,
)</code></pre><p>Solve for elliptic grid using a non-SLOR approach that is compatible with ImplicitAD</p><p><strong>Arguments:</strong></p><ul><li><code>wake_grid::Array{Float}</code> : initial guess for grid points.</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><code>algorithm::Symbol=:trust_region</code> : NLsolve algorithm type</li><li><code>autodiff::Symbol=:forward</code> : NLsolve derivatives option</li><li><code>atol::Float=1e-10</code> : convergence tolerance, default = 1e-9</li><li><code>iteration_limit::Int=10</code> : maximum number of iterations to run, default=100</li><li><code>converged::Vector{Bool}=[false]</code> : convergence flag</li><li><code>residual_value::Vector{Float}=[0.0]</code> : final residual value</li><li><code>verbose::Bool=false</code> : flag to print verbose statements</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L440-L465">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.solve_elliptic_grid" href="#DuctAPE.solve_elliptic_grid"><code>DuctAPE.solve_elliptic_grid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solve_elliptic_grid(x,p)</code></pre><p>Solve for elliptic grid using a non-SLOR approach that is compatible with ImplicitAD</p><p><strong>Arguments:</strong></p><ul><li><code>x::Vector{Float}</code> : inputs (including initial guess for wake grid points)</li><li><code>p::NamedTuple</code> : constant parameters</li></ul><p><strong>Returns:</strong></p><ul><li><code>converged_states::Vector{Float}</code> : converged states for grid solver</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L399-L410">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.elliptic_grid_residual!" href="#DuctAPE.elliptic_grid_residual!"><code>DuctAPE.elliptic_grid_residual!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">elliptic_grid_residual!(r, y, x, p)</code></pre><p>Residual function for elliptic grid solver.</p><p>Note: We assume grid has radial lines of constant axial position (as is done in the grid initialization) such that z&#39;(ξ)=1.0 and z&#39;&#39;(ξ)=z&#39;(η)=z&#39;&#39;(η)=0.0.</p><p><strong>Arguments</strong></p><ul><li><code>r::Vector{Float}</code> : residual values</li><li><code>y::Vector{Float}</code> : states</li><li><code>x::Vector{Float}</code> : inputs (to which derivatives are sensitive)</li><li><code>p::Vector{Float}</code> : constants</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L110-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.backward_stencil_1" href="#DuctAPE.backward_stencil_1"><code>DuctAPE.backward_stencil_1</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">backward_stencil_1(f, x)</code></pre><p>Three-point, backward difference scheme on a non-uniform grid.</p><p><strong>Arguments:</strong></p><ul><li><code>f::AbstractMatrix{Float}</code> : f(x) for x<em>{i-2}:x</em>{i}</li><li><code>x::AbstractVector{Float}</code> : [x<em>{i-2}:x</em>{i}]</li></ul><p><strong>Returns:</strong></p><ul><li><code>f&#39;(x)::Float</code> : ∂f/∂x at x_i</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.center_stencil_1" href="#DuctAPE.center_stencil_1"><code>DuctAPE.center_stencil_1</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">center_stencil_1(f, x)</code></pre><p>Three-point, central difference scheme on a non-uniform grid, for first derivatives.</p><p><strong>Arguments:</strong></p><ul><li><code>f::AbstractMatrix{Float}</code> : f(x) for x<em>{i-1}:x</em>{i+1}</li><li><code>x::AbstractVector{Float}</code> : [x<em>{i-1}:x</em>{i+1}]</li></ul><p><strong>Returns:</strong></p><ul><li><code>f&#39;(x)::Float</code> : ∂f/∂x at x_i</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L36-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.center_stencil_2" href="#DuctAPE.center_stencil_2"><code>DuctAPE.center_stencil_2</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">center_stencil_2(f, x)</code></pre><p>Three-point, central difference scheme on a non-uniform grid, for second derivatives.</p><p><strong>Arguments:</strong></p><ul><li><code>f::AbstractMatrix{Float}</code> : f(x) for x<em>{i-1}:x</em>{i+1}</li><li><code>x::AbstractVector{Float}</code> : [x<em>{i-1}:x</em>{i+1}]</li></ul><p><strong>Returns:</strong></p><ul><li><code>f&#39;&#39;(x)::Float</code> : ∂^2f/∂x^2 at x_i</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L57-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.center_stencil_2_mixed" href="#DuctAPE.center_stencil_2_mixed"><code>DuctAPE.center_stencil_2_mixed</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">center_stencil_2_mixed(f, x, y)</code></pre><p>Three-point, central difference scheme on a non-uniform grid, for mixed derivatives. Uses a consecutive first derivative central difference (<code>center_stencil_1</code>) in the x-dimension then another centeral difference of the f&#39;(x) values in the y-dimension.</p><p><strong>Arguments:</strong></p><ul><li><code>f::AbstractMatrix{Float}</code> : f(x,y) for x<em>{i-1}:x</em>{i+1} and y<em>{i-1}:y</em>{i+1}</li><li><code>x::AbstractVector{Float}</code> : [x<em>{i-1}:x</em>{i+1}]</li><li><code>y::AbstractVector{Float}</code> : [y<em>{i-1}:y</em>{i+1}]</li></ul><p><strong>Returns:</strong></p><ul><li><code>f&#39;(x,y)::Float</code> : ∂^2f/∂x∂y at x_ij</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/elliptic_grid_residuals.jl#L85-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_wake_panels" href="#DuctAPE.generate_wake_panels"><code>DuctAPE.generate_wake_panels</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_wake_panels(wake_grid)</code></pre><p>Generate paneling for each wake sheet emanating from the rotor blade elements.</p><p><strong>Arguments:</strong></p><ul><li><code>wake_grid::Array{Float,3}</code> : axial and radial locations of each wake_grid point (after relaxation/solution)</li></ul><p><strong>Returns:</strong></p><ul><li><code>wake_vortex_panels::NamedTuple</code> : A named tuple of panel values describing the wake vortex panels</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L445-L455">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_wake_panels!" href="#DuctAPE.generate_wake_panels!"><code>DuctAPE.generate_wake_panels!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_wake_panels!(wake_panels, wake_grid)</code></pre><p>In-place version of <code>generate_wake_panels</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L470-L474">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_wake_k" href="#DuctAPE.get_wake_k"><code>DuctAPE.get_wake_k</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_wake_k(r, nwn)</code></pre><p>Calculate geometric constant for use in later calculation of wake panel node strengths.</p><p><strong>Arguments</strong></p><ul><li><code>r::Vector{Float}</code> : Vector of wake panel node radial positions</li></ul><p><strong>Returns</strong></p><ul><li><code>K::Vector{Float}</code> : Vector of geometric constants used in calculation of panel node strengths.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L486-L496">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_wake_k!" href="#DuctAPE.get_wake_k!"><code>DuctAPE.get_wake_k!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_wake_k!(K, r)</code></pre><p>In-place version of <code>get_wake_k</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/wake_geometry.jl#L504-L508">source</a></section></article><h3 id="Bodies"><a class="docs-heading-anchor" href="#Bodies">Bodies</a><a id="Bodies-1"></a><a class="docs-heading-anchor-permalink" href="#Bodies" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.reinterpolate_bodies!" href="#DuctAPE.reinterpolate_bodies!"><code>DuctAPE.reinterpolate_bodies!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reinterpolate_bodies!(
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    duct_coordinates,
    centerbody_coordinates,
    zwake,
    duct_le_coordinates,
    ncenterbody_inlet,
    nduct_inlet,
    finterp=FLOWMath.akima,
)</code></pre><p>Reinterpolate duct and centerbody coordinates in order to make them compatible with the calculated wake sheet panel axial positions.</p><p><strong>Arguments</strong></p><ul><li><code>rp_duct_coordinates::Matrix{Float}</code> : the re-paneled duct coordinates</li><li><code>rp_centerbody_coordinates::Matrix{Float}</code> : the re-paneled centerbody coordinates</li><li><code>duct_coordinates::Matrix{Float}</code> : the input duct coordinates</li><li><code>centerbody_coordinates::Matrix{Float}</code> : the input centerbody coordinates</li><li><code>zwake::Vector{Float}</code> : the wake sheet panel node axial positions</li><li><code>duct_le_coordinates::Matrix{Float}</code> : [z r] coordinates of duct leading edge</li><li><code>ncenterbody_inlet::Int</code> : the number of panels to use for the centerbody inlet</li><li><code>nduct_inlet,::Int</code> : the number of panels to use for the duct inlet</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>finterp::Function=FLOWMath.akima</code> : interpolation method</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/body_geometry.jl#L1-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.place_duct!" href="#DuctAPE.place_duct!"><code>DuctAPE.place_duct!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">place_duct!(rp_duct_coordinates, Rtip, rotorzloc, tip_gap)</code></pre><p>Transform the duct radial coordinates such that the leading rotor radius touches the duct wall.</p><p>Note that this function is called AFTER the repanling function is called, such that the rotorzloc locations should line up directly with the duct and centerbody coordinates.</p><p><strong>Arguments</strong></p><ul><li><code>rp_duct_coordinates::Matrix{Float}</code> : the re-paneled duct coordinates</li><li><code>Rtip::Vector{Float}</code> : Tip radii for the rotor(s)</li><li><code>rotorzloc::Vector{Float}</code> : axial position(s) of the rotor(s)</li><li><code>tip_gap::Vector{Float}</code> : tip gap for the fore-most rotor (MUST BE ZERO for now)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/body_geometry.jl#L145-L157">source</a></section></article><h3 id="Rotors"><a class="docs-heading-anchor" href="#Rotors">Rotors</a><a id="Rotors-1"></a><a class="docs-heading-anchor-permalink" href="#Rotors" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.interpolate_blade_elements" href="#DuctAPE.interpolate_blade_elements"><code>DuctAPE.interpolate_blade_elements</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">interpolate_blade_elements(
    rsp, Rtips, Rhubs, rotor_panel_centers, nbe; finterp=FLOWMath.linear
)</code></pre><p>Interpolate blade elements based on Rotor inputs and number of desired blade elements (from number of wake sheet in PanelingConstants input)</p><p><strong>Arguments</strong></p><ul><li><code>rsp::Rotor</code> : A Rotor object</li><li>`Rtips::Vector{Float}&#39; : Vector of rotor tip radii</li><li>`Rhubs::Vector{Float}&#39; : Vector of rotor hub radii</li><li>`rotor<em>panel</em>centers::Vector{Float}&#39; : Vector of rotor panel centers</li><li><code>nbe::Int</code> : number of blade elements per rotor</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>finterp::Function=FLOWMath.linear</code> : interpolation method (note, using Akima splines as is done for the body geometry can lead to negative chord in some cases)</li></ul><p><strong>Returns</strong></p><ul><li><code>blade_element_cache::NamedTuple</code> : A named tuple containing the cacheable blade element information excluding the airfoil data.</li><li><code>airfoils::NamedTuple</code> : A named tuple containing vectors of inner and outer airfoil polar data for each blade element, used in interpolating the input data at blade element locations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.interpolate_blade_elements!" href="#DuctAPE.interpolate_blade_elements!"><code>DuctAPE.interpolate_blade_elements!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">interpolate_blade_elements!(
    blade_element_cache, rsp, rotor_panel_centers, nbe; finterp=FLOWMath.linear
)</code></pre><p>In-place version of <code>interpolate_blade_elements</code>.</p><p><strong>Returns</strong></p><ul><li><code>airfoils::NamedTuple</code> : A named tuple containing vectors of inner and outer airfoil polar data for each blade element, used in interpolating the input data at blade element locations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L95-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_blade_ends_from_body_geometry" href="#DuctAPE.get_blade_ends_from_body_geometry"><code>DuctAPE.get_blade_ends_from_body_geometry</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_blade_ends_from_body_geometry(
    rp_duct_coordinates, rp_centerbody_coordinates, tip_gaps, rotorzloc
)</code></pre><p>Obtain rotor hub and tip radii based on duct and centerbody geometry.</p><p><strong>Arguments</strong></p><ul><li><code>var::type</code> :</li><li><code>rp_duct_coordinates::Matrix{Float}</code> : re-paneled duct coordinates</li><li><code>rp_centerbody_coordinates::Matrix{Float}</code> : re-paneled centerbody coordinates</li><li><code>tip_gaps::Vector{Float}</code> : gaps between blade tips and duct surface (MUST BE ZEROS for now)</li><li><code>rotorzloc::Vector{Float}</code> : rotor lifting line axial positions.</li></ul><p><strong>Returns</strong></p><ul><li><code>Rtips::Vector{Float}</code> : rotor tip radii</li><li><code>Rhubs::Vector{Float}</code> : rotor hub radii</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L173-L190">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_blade_ends_from_body_geometry!" href="#DuctAPE.get_blade_ends_from_body_geometry!"><code>DuctAPE.get_blade_ends_from_body_geometry!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_blade_ends_from_body_geometry!(
    Rtip,
    Rhub,
    rp_duct_coordinates,
    rp_centerbody_coordinates,
    tip_gaps,
    rotorzloc;
    silence_warnings=true,
)</code></pre><p>In-place version of <code>get_blade_ends_from_body_geometry</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L209-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_local_solidity" href="#DuctAPE.get_local_solidity"><code>DuctAPE.get_local_solidity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_local_solidity(B, chord, r)</code></pre><p>Calculate local solidity from local chord, radial position, and number of blades.</p><p><strong>Arguments</strong></p><ul><li><code>B::Float</code> : number of blades on rotor (usually an integer, but not necessarily).</li><li><code>chord::Vector{Float}</code> : chord lengths at each radial station.</li><li><code>r::Vector{Float}</code> : dimensional radial positions.</li></ul><p><strong>Returns</strong></p><ul><li><code>solidity::Vector{Float}</code> : local solidity at each radial station</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L268-L280">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_stagger" href="#DuctAPE.get_stagger"><code>DuctAPE.get_stagger</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_stagger(twists)</code></pre><p>Convert twist angle to stagger angle</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L285-L289">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_rotor_panels" href="#DuctAPE.generate_rotor_panels"><code>DuctAPE.generate_rotor_panels</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_rotor_panels(rotorzloc, wake_grid, rotor_indices_in_wake, nwake_sheets)</code></pre><p>Generate rotor panel objects.</p><p><strong>Arguments</strong></p><ul><li><code>rotorzloc::Vector{Float}</code> : rotor lifting line axial position</li><li><code>wake_grid::Array{Float,3}</code> : wake elliptic grid axial and radial locations</li><li><code>rotor_indices_in_wake::Vector{Int}</code> : indices of where along wake the rotors are placed</li><li><code>nwake_sheets::Int</code> : number of wake sheets</li></ul><p><strong>Returns</strong></p><ul><li><code>rotor_source_panels::NamedTuple</code> : A named tuple containing the rotor source panel variables.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L294-L307">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.generate_rotor_panels!" href="#DuctAPE.generate_rotor_panels!"><code>DuctAPE.generate_rotor_panels!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_rotor_panels!(
    rotor_source_panels, rotorzloc, wake_grid, rotor_indices_in_wake, nwake_sheets
)</code></pre><p>In-place version of <code>generate_rotor_panels</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/geometry/rotor_geometry.jl#L323-L329">source</a></section></article><h2 id="Induced-Velocities"><a class="docs-heading-anchor" href="#Induced-Velocities">Induced Velocities</a><a id="Induced-Velocities-1"></a><a class="docs-heading-anchor-permalink" href="#Induced-Velocities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_unit_induced_velocities" href="#DuctAPE.calculate_unit_induced_velocities"><code>DuctAPE.calculate_unit_induced_velocities</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_unit_induced_velocities(problem_dimensions, panels, integration_options)</code></pre><p>Calculate all the unit-induced velocties of all panels on all control points</p><p><strong>Arguments</strong></p><ul><li><code>problem_dimensions::ProblemDimensions</code> : A ProblemDimensions object</li><li><code>panels::NamedTuple</code> : A named tuple containing all the paneling information</li><li><code>integration_options::IntegrationOptions</code> : Options used for integration of velocity kernals across panels</li></ul><p><strong>Returns</strong></p><ul><li><code>ivr::NamedTuple</code> : A named tuple containing arrays of induced velocities on the rotors</li><li><code>ivw::NamedTuple</code> : A named tuple containing arrays of induced velocities on the wake</li><li><code>ivb::NamedTuple</code> : A named tuple containing arrays of induced velocities on the bodies</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L346-L360">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_unit_induced_velocities!" href="#DuctAPE.calculate_unit_induced_velocities!"><code>DuctAPE.calculate_unit_induced_velocities!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_unit_induced_velocities!(ivr, ivw, ivb, panels, integration_options)</code></pre><p>In-place version of <code>calculate_unit_induced_velocities</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L400-L404">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_linear_system" href="#DuctAPE.initialize_linear_system"><code>DuctAPE.initialize_linear_system</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_linear_system(
    ivb,
    body_vortex_panels,
    rotor_source_panels,
    wake_vortex_panels,
    Vinf,
    integration_options,
)</code></pre><p>Set up the linear system used in the panel method solve.</p><p><strong>Arguments</strong></p><ul><li><code>ivb::NamedTuple</code> : the named tuple containing all the unit induced velocities on the bodies</li><li><code>body_vortex_panels::NamedTuple</code> : the named tuple containing the body vortex panel information</li><li><code>rotor_source_panels::NamedTuple</code> : the named tuple containing the rotor source panel information</li><li><code>wake_vortex_panels::NamedTuple</code> : the named tuple containing the wake vortex panel information</li><li><code>Vinf::Vector{Float}</code> : the one-element vector containing the Freestream velocity magnitude</li><li><code>integration_options::IntegrationOptions</code> : the integration options used in integrating the panel induced velocities</li></ul><p><strong>Returns</strong></p><ul><li><code>linsys::NamedTuple</code> : A named tuple containing cacheable data for the linear system, including:<ul><li><code>A_bb::Array{Float}</code> : AIC (LHS) matrix for the panel method system</li><li><code>b_bf::Array{Float}</code> : Initial system RHS vector based on freestrem magnitude</li><li><code>A_br::Array{Float}</code> : Unit normal velocity from rotors onto body panels</li><li><code>A_pr::Array{Float}</code> : Unit normal velocity from rotors onto body internal psuedo control points</li><li><code>A_bw::Array{Float}</code> : Unit normal velocity from wake onto body panels</li><li><code>A_pw::Array{Float}</code> : Unit normal velocity from wake onto body internal psuedo control points</li></ul></li><li><code>A_bb_LU::LinearAlgebra.LU</code> : LinearAlgebra LU factorization of the LHS matrix</li><li><code>lu_decomp_flag::Vector{Bool}</code> : flag for whether factorization was successful</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L606-L636">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_linear_system!" href="#DuctAPE.initialize_linear_system!"><code>DuctAPE.initialize_linear_system!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_linear_system!(
    linsys,
    ivb,
    body_vortex_panels,
    rotor_source_panels,
    wake_vortex_panels,
    Vinf,
    intermediate_containers,
    integration_options,
)</code></pre><p>In-place version of <code>initialize_linear_system</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/preprocess.jl#L757-L770">source</a></section></article><h3 id="Unit-Induced-Velocities"><a class="docs-heading-anchor" href="#Unit-Induced-Velocities">Unit Induced Velocities</a><a id="Unit-Induced-Velocities-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Induced-Velocities" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_xrm" href="#DuctAPE.calculate_xrm"><code>DuctAPE.calculate_xrm</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_xrm(controlpoint, node)</code></pre><p>Calculate xi, rho, and m for vortex and/or source ring induced velocity calculation.</p><p>Returns zeros if ring is on (or approximately on) the axis of rotation (zero radius).</p><p><strong>Arguments</strong></p><ul><li><code>controlpoint::Vector{Float}</code> [z r] coordinates of point being influenced</li><li><code>node::Vector{Float}</code> : [z r] coordinates of singularity ring</li></ul><p><strong>Returns</strong></p><ul><li><code>xi::Float</code> : normalized relative axial position</li><li><code>rho::Float</code> : normalized relative radial position</li><li><code>m::Float</code> : Elliptic integral input</li><li><code>rj::Float</code> : radial position of the ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L6-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_xrm!" href="#DuctAPE.calculate_xrm!"><code>DuctAPE.calculate_xrm!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_xrm!(cache_vec, controlpoint, node)</code></pre><p>In-place version of <code>calculate_xrm</code>.</p><p>Cache_vec is a vector used to hold intermediate values as well as the outputs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L43-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.get_elliptics" href="#DuctAPE.get_elliptics"><code>DuctAPE.get_elliptics</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_elliptics(m)</code></pre><p>Calculate value of elliptic functions for the given geometry parameter.</p><p><strong>Arguments</strong></p><ul><li><code>m::Float</code> : Elliptic Function parameter</li></ul><p><strong>Returns</strong></p><ul><li><code>K::Float</code> : K(m), value of elliptic function of the first kind at m.</li><li><code>E::Float</code> : E(m), value of eeliptic function of the second kind at m.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L76-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_ring_vz" href="#DuctAPE.vortex_ring_vz"><code>DuctAPE.vortex_ring_vz</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_ring_vz(xi, rho, m, r_influence, influence_length)</code></pre><p>Axial velocity induced by axisymmetric vortex ring.</p><p>Uses equivalent smoke ring induced velocity for self-induction, and returns zero if vortex ring is on axis of rotation (zero radius).</p><p><strong>Arguments</strong></p><ul><li><code>xi::Float</code> : normalized z-coordinate, (z-zo)/ro</li><li><code>rho::Float</code> : normalized r-coordinate, r/ro</li><li><code>m::Float</code> : Elliptic Integral parameter, 4rho/sqrt(xi^2+(rho+1)^2)</li><li><code>r_influence::Float</code> : radial location of vortex ring, ro</li><li><code>influence_length::Float</code> : length of panel used in calculating self-induction</li></ul><p><strong>Returns</strong></p><ul><li><code>vz::Float</code> : axially induced velocity of vortex ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L107-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_ring_vz!" href="#DuctAPE.vortex_ring_vz!"><code>DuctAPE.vortex_ring_vz!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_ring_vz!(xi, rho, m, r_influence, influence_length, cache_vec)</code></pre><p>Same as vortex<em>ring</em>vz, but uses the cache_vec to store intermediate calculations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L148-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.smoke_ring_vz" href="#DuctAPE.smoke_ring_vz"><code>DuctAPE.smoke_ring_vz</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">smoke_ring_vz(r_influence, influence_length)</code></pre><p>Equivalent &quot;smoke&quot; ring self-induced velocity.</p><p><strong>Arguments</strong></p><ul><li><code>r_influence::Float</code> : radial position of ring (i.e. the ring raidus)</li><li><code>influence_length::Float</code> : length of influencing panel</li></ul><p><strong>Returs</strong></p><ul><li><code>vz::Float</code> : axially induced velocity of vortex ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L178-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_ring_vr" href="#DuctAPE.vortex_ring_vr"><code>DuctAPE.vortex_ring_vr</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_ring_vr(xi, rho, m, r_influence)</code></pre><p>Radial velocity induced by axisymmetric vortex ring.</p><p>Returns zero if vortex ring is on axis of rotation (zero radius), the point of influence is on the axis, or if self-inducing velocity.</p><p><strong>Arguments</strong></p><ul><li><code>xi::Float</code> : normalized z-coordinate, (z-zo)/ro</li><li><code>rho::Float</code> : normalized r-coordinate, r/ro</li><li><code>m::Float</code> : Elliptic Integral parameter, 4rho/sqrt(xi^2+(rho+1)^2)</li><li><code>r_influence::Float</code> : radial location of vortex ring, ro</li></ul><p><strong>Returns</strong></p><ul><li><code>vr::Float</code> : radially induced velocity of vortex ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L197-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_ring_vr!" href="#DuctAPE.vortex_ring_vr!"><code>DuctAPE.vortex_ring_vr!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_ring_vr!(xi, rho, m, r_influence, cache_vec)</code></pre><p>Same as vortex<em>ring</em>vr, but uses the cache_vec to store intermediate calculations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L237-L241">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_ring_vz" href="#DuctAPE.source_ring_vz"><code>DuctAPE.source_ring_vz</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_ring_vz(xi, rho, m, r_influence)</code></pre><p>Axial velocity induced by axisymmetric source ring.</p><p>Returns zero if source ring is on axis of rotation (zero radius), the point of influence is on the axis, or if self-inducing velocity.</p><p><strong>Arguments:</strong></p><ul><li><code>xi::Float</code> : normalized z-coordinate, (z-zo)/ro</li><li><code>rho::Float</code> : normalized r-coordinate, r/ro</li><li><code>m::Float</code> : Elliptic Integral parameter, 4rho/sqrt(xi^2+(rho+1)^2)</li><li><code>r_influence::Float</code> : radial location of vortex ring, ro</li></ul><p><strong>Returns:</strong></p><ul><li><code>vz::Float</code> : axially induced velocity of source ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L269-L284">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_ring_vz!" href="#DuctAPE.source_ring_vz!"><code>DuctAPE.source_ring_vz!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_ring_vz!(xi, rho, m, r_influence, cache_vec)</code></pre><p>Same as source<em>ring</em>vz, but uses cache_vec to store intermediate values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L306-L310">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_ring_vr" href="#DuctAPE.source_ring_vr"><code>DuctAPE.source_ring_vr</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_ring_vr(xi, rho, m, r_influence)</code></pre><p>Radial velocity induced by axisymmetric source ring.</p><p>Returns zero if source ring is on axis of rotation (zero radius), the point of influence is on the axis, or if self-inducing velocity.</p><p><strong>Arguments:</strong></p><ul><li><code>xi::Float</code> : normalized z-coordinate, (z-zo)/ro</li><li><code>rho::Float</code> : normalized r-coordinate, r/ro</li><li><code>m::Float</code> : Elliptic Integral parameter, 4rho/sqrt(xi^2+(rho+1)^2)</li><li><code>r_influence::Float</code> : radial location of vortex ring, ro</li></ul><p><strong>Returns:</strong></p><ul><li><code>vr::Float</code> : radially induced velocity of source ring</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L332-L347">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_ring_vr!" href="#DuctAPE.source_ring_vr!"><code>DuctAPE.source_ring_vr!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_ring_vr!(xi, rho, m, r_influence, cache_vec)</code></pre><p>Same as source<em>ring</em>vr, but uses cache_vec to store intermediate values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/unit_induced_velocities.jl#L370-L374">source</a></section></article><h3 id="Unit-Induced-Velocity-Matrices"><a class="docs-heading-anchor" href="#Unit-Induced-Velocity-Matrices">Unit Induced Velocity Matrices</a><a id="Unit-Induced-Velocity-Matrices-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Induced-Velocity-Matrices" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.induced_velocities_from_vortex_panels_on_points" href="#DuctAPE.induced_velocities_from_vortex_panels_on_points"><code>DuctAPE.induced_velocities_from_vortex_panels_on_points</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_velocities_from_vortex_panels_on_points(
    controlpoints,
    nodes,
    nodemap,
    influence_lengths,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>Calculate axial and radial components of induced velocity for a set of control points due to a set of axisymmetric vortex panels (bands).</p><p>Used for getting the unit induced velocities due to the body panels on the rotor/wake as well as the unit induced velocity due to the wake on the body/rotor.</p><p><strong>Arguments</strong></p><ul><li><code>controlpoints::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>nodes::Matrix{Float}</code> : [z r] coordinates of vortex rings</li><li><code>nodemap::Matrix{Int}</code> : mapping from panel index to associated node indices</li><li><code>influence_lengths::Vector{Float}</code> : lengths over which vortex ring influence is applied on the surface.</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>integration_caches::NamedTuple=nothing</code> : cache used in in-place quadrature functions.</li></ul><p><strong>Returns</strong></p><ul><li><code>VEL::Array{Float}</code> : N-controlpoint x N-node x [vz, vr] array of induced velocity components</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/induced_velocity_matrices.jl#L11-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.induced_velocities_from_vortex_panels_on_points!" href="#DuctAPE.induced_velocities_from_vortex_panels_on_points!"><code>DuctAPE.induced_velocities_from_vortex_panels_on_points!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_velocities_from_vortex_panels_on_points!(
    VEL,
    controlpoint,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>In-place version of <code>induced_velocities_from_vortex_panels_on_points</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/induced_velocity_matrices.jl#L64-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.induced_velocities_from_source_panels_on_points" href="#DuctAPE.induced_velocities_from_source_panels_on_points"><code>DuctAPE.induced_velocities_from_source_panels_on_points</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_velocities_from_source_panels_on_points(
    controlpoints,
    nodes,
    nodemap,
    influence_lengths,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>Calculate axial and radial components of induced velocity for a set of control points due to a set of axisymmetric source panels (bands)</p><p>Used for getting the unit induced velocities due to the body panels on the rotor/wake as well as the unit induced velocity due to the wake on the body/rotor.</p><p><strong>Arguments</strong></p><ul><li><code>controlpoints::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>nodes::Matrix{Float}</code> : [z r] coordinates of vortex rings</li><li><code>nodemap::Matrix{Int}</code> : mapping from panel index to associated node indices</li><li><code>influence_lengths::Vector{Float}</code> : lengths over which vortex ring influence is applied on the surface.</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Returns:</strong></p><ul><li><code>VEL::Array{Float}</code> : N-controlpoint x N-node x [vz, vr] array of induced velocity components</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/induced_velocity_matrices.jl#L152-L176">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.induced_velocities_from_source_panels_on_points!" href="#DuctAPE.induced_velocities_from_source_panels_on_points!"><code>DuctAPE.induced_velocities_from_source_panels_on_points!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_velocities_from_source_panels_on_points!(
    VEL,
    controlpoint,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>In-place version of <code>induced_velocities_from_source_panels_on_points</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/induced_velocity_matrices.jl#L203-L215">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.induced_velocities_from_trailing_edge_gap_panel!" href="#DuctAPE.induced_velocities_from_trailing_edge_gap_panel!"><code>DuctAPE.induced_velocities_from_trailing_edge_gap_panel!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_velocities_from_trailing_edge_gap_panel!(
    VEL,
    controlpoint,
    tenode,
    teinfluence_length,
    tendotn,
    tencrossn,
    teadjnodeidxs,
    integration_options;
    wake=false,
    integration_caches=nothing,
)</code></pre><p>Calculate axial and radial components of induced velocity for a set of control points due to any trailing edge gap panels.</p><p>Used for getting the unit induced velocities due to the body body trailing edge gap panels on the body/rotor/wake.</p><p>Note, this function is also used to calculate the influence of the wake ends rather than modeling a semi-infinite fortex sheet.</p><p><strong>Arguments</strong></p><ul><li><code>VEL::Array{Float}</code> : N-controlpoint x N-node x [vz, vr] array of induced velocity components (modified in place)</li><li><code>controlpoints::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>nodes::Matrix{Float}</code> : [z r] coordinates of vortex rings</li><li><code>nodemap::Matrix{Int}</code> : mapping from panel index to associated node indices</li><li><code>influence_lengths::Vector{Float}</code> : lengths over which vortex ring influence is applied on the surface.</li><li><code>strengths::Matrix{Float}</code> : vortex constant circulation values</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>wake::Bool=false</code> : flag to indicate if this is being used for a wake sheet.</li><li><code>integration_caches::NamedTuple=nothing</code> : cache used in in-place quadrature functions.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/induced_velocity_matrices.jl#L290-L323">source</a></section></article><h3 id="Panel-Method-Velocity-Functions"><a class="docs-heading-anchor" href="#Panel-Method-Velocity-Functions">Panel Method Velocity Functions</a><a id="Panel-Method-Velocity-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Panel-Method-Velocity-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_aic_boundary_on_boundary" href="#DuctAPE.vortex_aic_boundary_on_boundary"><code>DuctAPE.vortex_aic_boundary_on_boundary</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_aic_boundary_on_boundary(
    controlpoint, normal, node, nodemap, influence_length, integration_options
)</code></pre><p>Calculate panel method influence coefficients (V dot nhat) for a set of control points (on panels) due to a set of axisymmetric vortex rings (also on body surface)</p><p>Can be used for constructing the LHS influence Matrix for the panel method system.</p><p><strong>Arguments</strong></p><ul><li><code>controlpoint::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>normal::Matrix{Float}</code> : unit normal vectors of the panels on which the control points are situated.</li><li><code>node::Matrix{Float}</code> : [z r] coordinates of panel nodes (edges)</li><li><code>nodemap::Matrix{Int}</code> : [1 2] node indices for each panel</li><li><code>influence_length::Vector{Float}</code> : lengths of influencing panels</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Returns</strong></p><ul><li><code>AICn::Matrix{Float}</code> : N controlpoint x N+1 node  array of V dot nhat values</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L6-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_aic_boundary_on_boundary!" href="#DuctAPE.vortex_aic_boundary_on_boundary!"><code>DuctAPE.vortex_aic_boundary_on_boundary!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_aic_boundary_on_boundary!(
    AICn,
    controlpoint,
    normal,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>In-place verion of <code>vortex_aic_boundary_on_boundary</code>.</p><p>integration_caches is a named tuple containing caching for intermediate calculation values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L42-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_aic_boundary_on_field" href="#DuctAPE.vortex_aic_boundary_on_field"><code>DuctAPE.vortex_aic_boundary_on_field</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_aic_boundary_on_field(
    controlpoint,
    normal,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>Calculate panel method influence coefficients (V dot nhat) for a set of control points (NOT on panels) due to a set of axisymmetric vortex rings (on body surface)</p><p>Used for constructing portions of the panel method LHS matrix related to the pseudo control points in the bodies.</p><p><strong>Arguments:</strong></p><ul><li><code>controlpoint::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>normal::Matrix{Float}</code> : unit normal vectors of the panels on which the control points are situated.</li><li><code>node::Matrix{Float}</code> : [z r] coordinates of panel nodes (edges)</li><li><code>nodemap::Matrix{Int}</code> : [1 2] node indices for each panel</li><li><code>influence_length::Vector{Float}</code> : lengths of influencing panels</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>integration_caches::NamedTuple=nothing</code> : caches for intermediate values in integration.</li></ul><p><strong>Returns:</strong></p><ul><li><code>AICn::Matrix{Float}</code> : N controlpoint x N+1 node  array of V dot nhat values</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L128-L156">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.vortex_aic_boundary_on_field!" href="#DuctAPE.vortex_aic_boundary_on_field!"><code>DuctAPE.vortex_aic_boundary_on_field!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vortex_aic_boundary_on_field!(
    AICn,
    controlpoint,
    normal,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>In-place version of <code>vortex_aic_boundary_on_field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L186-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.add_kutta!" href="#DuctAPE.add_kutta!"><code>DuctAPE.add_kutta!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_kutta!(LHS, AICn, kids)</code></pre><p>Add Kutta condition (γ<em>1 + γ</em>N = 0) to LHS matrix.</p><ul><li><code>LHS::Matrix{Float}</code> : a pre-allocated (zeros) full size left-hand side matrix</li><li><code>AICn::Matrix{Float}</code> :  influence coefficients for panels/nodes</li><li><code>kids::Vector{Int}</code> : [1 2] indices of where to put 1&#39;s for kutta condition</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L277-L285">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.add_te_gap_aic!" href="#DuctAPE.add_te_gap_aic!"><code>DuctAPE.add_te_gap_aic!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_te_gap_aic!(
    AICn,
    controlpoint,
    normal,
    tenode,
    teinfluence_length,
    tendotn,
    tencrossn,
    teadjnodeidxs,
    integration_options;
    wake=false,
    integration_caches=nothing,
)</code></pre><p>Add trailing edge gap aerodynmic influence coefficient contributions to the AIC matrix.</p><p><strong>Arguments</strong></p><ul><li><code>AICn::Matrix{Float}</code> : N controlpoint x N+1 node  array of V dot nhat values</li><li><code>controlpoint::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>normal::Matrix{Float}</code> : unit normal vectors of the panels on which the control points are situated.</li><li><code>tenode::Matrix{Float}</code> : [z r] coordinates of trailing edge panel nodes (edges)</li><li><code>teinfluence_length::Vector{Float}</code> : lengths of influencing trailing edge panels</li><li><code>tendotn::Matrix{Float}</code> : nhat of trailing edge panel dotted with nhat of adjacent panels</li><li><code>tencrossn::Matrix{Float}</code> : nhat of trailing edge panel crossed with nhat of adjacent panels</li><li><code>teadjnodeidxs::Matrix{Float}</code> : indices of nodes adjacent to trailing edge panel</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>wake::Bool=false</code> : flag as to whether this function is being applied to a wake sheet.</li><li><code>integration_caches::NamedTuple=nothing</code> : caches for intermediate values in integration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L306-L337">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_aic" href="#DuctAPE.source_aic"><code>DuctAPE.source_aic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_aic(
    controlpoint,
    normal,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>Calculate panel method influence coefficients (V dot nhat) for a set of control points (on panels) due to a set of axisymmetric source rings not on body surface.</p><p>Can be used for constructing the RHS boundary conditions due to rotor source panels.</p><p><strong>Arguments</strong></p><ul><li><code>controlpoint::Matrix{Float}</code> [z r] coordinates of points being influenced</li><li><code>normal::Matrix{Float}</code> : unit normal vectors of the panels on which the control points are situated.</li><li><code>node::Matrix{Float}</code> : [z r] coordinates of panel nodes (edges)</li><li><code>nodemap::Matrix{Int}</code> : [1 2] node indices for each panel</li><li><code>influence_length::Vector{Float}</code> : lengths of influencing panels</li><li><code>integration_options::IntegrationOptions</code> : integration options</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>integration_caches::NamedTuple=nothing</code> : caches for intermediate values in integration.</li></ul><p><strong>Returns</strong></p><ul><li><code>AICn::Matrix{Float}</code> : N controlpoint x N+1 node  array of V dot nhat values</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L412-L440">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.source_aic!" href="#DuctAPE.source_aic!"><code>DuctAPE.source_aic!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">source_aic!(
    AICn,
    controlpoint,
    normal,
    node,
    nodemap,
    influence_length,
    integration_options;
    integration_caches=nothing,
)</code></pre><p>In-place version of <code>source_aic</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L470-L483">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.freestream_influence_vector" href="#DuctAPE.freestream_influence_vector"><code>DuctAPE.freestream_influence_vector</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">freestream_influence_vector(normals, Vinfmat)</code></pre><p>Calculate RHS contributions due to freestream.</p><p>Note that the freestream is assumed to have zero radial component in the underlying theory, but here we allow an arbitrary 2D vector for velocity for taking the dot product easier.</p><p><strong>Arguments</strong></p><ul><li><code>normals::Matrix{Float}</code> : unit normal vectors of the panels on which the control points are situated.</li><li><code>Vinfmat::Matrix{Float}</code> : [z r] components of freestream velocity (r&#39;s should be zero)</li></ul><p><strong>Returns</strong></p><ul><li><code>RHS::Vector{Float}</code> : vector of normal components of freestream velocity on input panels</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L530-L543">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.freestream_influence_vector!" href="#DuctAPE.freestream_influence_vector!"><code>DuctAPE.freestream_influence_vector!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">freestream_influence_vector!(RHS, normals, Vinfmat)</code></pre><p>In-place version of <code>freestream_influence_vector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L555-L559">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.assemble_lhs_matrix" href="#DuctAPE.assemble_lhs_matrix"><code>DuctAPE.assemble_lhs_matrix</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">assemble_lhs_matrix(
    AICn, AICpcp, npanel, nnode, totpanel, totnode, prescribednodeidxs; dummyval=1.0
)</code></pre><p>Assemble the LHS matrix of the panel method.</p><p><strong>Arguments</strong></p><ul><li><code>AICn::Matrix{Float}</code> : N controlpoint x N+1 node  array of V dot nhat values</li><li><code>AICpcp::Matrix{Float}</code> : Nbodies controlpoint x N+1 node  array of V dot nhat values (influence on psuedo control points)</li><li><code>npanel::Vector{Int}</code> : number of panels comprising each body</li><li><code>nnode::Vector{Int}</code> : number of nodes comprising each body</li><li><code>totpanel::Int</code> : total number of panels</li><li><code>totnode::Int</code> : total number of nodes</li><li><code>prescribednodeidxs::Vector{Int}</code> : indices of nodes with prescribed strengths (those on the axis of rotation).</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>dummyval::Float=1.0</code> : value for dummy input for prescribed and internal control points in the system. Do not change except for debugging purposes.</li></ul><p><strong>Returns</strong></p><ul><li><code>LHS::Matrix{Float}</code> : The full LHS matrix for the panel method.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L572-L593">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.assemble_lhs_matrix!" href="#DuctAPE.assemble_lhs_matrix!"><code>DuctAPE.assemble_lhs_matrix!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">assemble_lhs_matrix!(
    LHS, AICn, AICpcp, npanel, nnode, totpanel, totnode, prescribednodeidxs; dummyval=1.0
)</code></pre><p>In-place version of <code>assemble_lhs_matrix</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L619-L625">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.factorize_LHS" href="#DuctAPE.factorize_LHS"><code>DuctAPE.factorize_LHS</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">factorize_LHS(A::AbstractMatrix)</code></pre><p>Returns the LU decomposition of <code>A</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L661-L665">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.factorize_LHS!" href="#DuctAPE.factorize_LHS!"><code>DuctAPE.factorize_LHS!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">factorize_LHS!(Apivot::AbstractMatrix, A::AbstractMatrix)</code></pre><p>Returns the LU decomposition of <code>A</code> using <code>Apivot</code> as storage memory to pivot leaving <code>A</code> unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L681-L686">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.assemble_rhs_matrix" href="#DuctAPE.assemble_rhs_matrix"><code>DuctAPE.assemble_rhs_matrix</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">assemble_rhs_matrix(
    vdnb, vdnpcp, npanel, nnode, totpanel, totnode, prescribednodeidxs
)</code></pre><p><strong>Arguments</strong></p><ul><li><code>vdnb::Vector{Float}</code> : V dot nhat for body panels</li><li><code>vdnpcp::Vector{Float}</code> : V dot nhat for pseudo control points</li><li><code>npanel::Vector{Int}</code> : number of panels comprising each body</li><li><code>nnode::Vector{Int}</code> : number of nodes comprising each body</li><li><code>totpanel::Int</code> : total number of body panels</li><li><code>totnode::Int</code> : total number of body nodes</li><li><code>prescribednodeidxs::Vector{Int}</code> : indices of nodes with prescribed strengths (those on the axis of rotation)</li></ul><p><strong>Returns</strong></p><ul><li><code>RHS::Vector{Float}</code> : the RHS vector of the panel method.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L701-L717">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.assemble_rhs_matrix!" href="#DuctAPE.assemble_rhs_matrix!"><code>DuctAPE.assemble_rhs_matrix!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">assemble_rhs_matrix!(
    RHS, vdnb, vdnpcp, npanel, nnode, totpanel, totnode, prescribednodeidxs
)</code></pre><p>In-place version of <code>assemble_rhs_matrix</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L735-L741">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_normal_velocity" href="#DuctAPE.calculate_normal_velocity"><code>DuctAPE.calculate_normal_velocity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_normal_velocity(velocity_vector, normal)</code></pre><p>Calculate normal velocity_vector (V dot nhat).</p><p><strong>Arguments</strong></p><ul><li><code>velocity_vector::Matrix{Float}</code> : velocity vector [z r] on each panel</li><li><code>normal::Matrix{Float}</code> : the panel unit normals</li></ul><p><strong>Returns</strong></p><ul><li><code>AIC::Matrix{Float}</code> : V dot n on each panel</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L761-L772">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.calculate_normal_velocity!" href="#DuctAPE.calculate_normal_velocity!"><code>DuctAPE.calculate_normal_velocity!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_normal_velocity!(AIC, velocity_vector, normal)</code></pre><p>In-place version of <code>calculate_normal_velocity</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/body_aic.jl#L783-L787">source</a></section></article><h3 id="Quadrature"><a class="docs-heading-anchor" href="#Quadrature">Quadrature</a><a id="Quadrature-1"></a><a class="docs-heading-anchor-permalink" href="#Quadrature" title="Permalink"></a></h3><h4 id="Integrands"><a class="docs-heading-anchor" href="#Integrands">Integrands</a><a id="Integrands-1"></a><a class="docs-heading-anchor-permalink" href="#Integrands" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_vortex_induced_velocity_sample" href="#DuctAPE.nominal_vortex_induced_velocity_sample"><code>DuctAPE.nominal_vortex_induced_velocity_sample</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_vortex_induced_velocity_sample(
    t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>Calculate the velocity induced by a linear vortex panel on a point.</p><p><strong>Arguments</strong></p><ul><li><code>t::Float</code> : sample point in range (0,1) selected by quadrature method.</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>cache_vec::Vector{Float}</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>nondimrange::Tuple=(0.0,1.0)</code> : Non-dimensional range describing the panel length.  Do not change excpet for debugging purposes. Note, can also be a vector.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : 2x2 matrix of axial and radial induced velocities from each of the nodes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L10-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_vortex_induced_velocity_sample!" href="#DuctAPE.nominal_vortex_induced_velocity_sample!"><code>DuctAPE.nominal_vortex_induced_velocity_sample!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_vortex_induced_velocity_sample!(
    V, t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>In-place version of <code>nominal_vortex_induced_velocity_sample</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L76-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.subtracted_singular_vortex_influence" href="#DuctAPE.subtracted_singular_vortex_influence"><code>DuctAPE.subtracted_singular_vortex_influence</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtracted_singular_vortex_influence(node, controlpoint)</code></pre><p>Calculate the singular portions of the self-induced vortex panel influence to subtract off the integral in the separation of singularity method.</p><p><strong>Arguments</strong></p><ul><li><code>node::Vector{Float}</code> : node position</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li></ul><p><strong>Returns</strong></p><ul><li><code>axial::Float</code> : axial direction influence</li><li><code>radial::Float</code> : radial direction influence</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L125-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.subtracted_singular_vortex_influence!" href="#DuctAPE.subtracted_singular_vortex_influence!"><code>DuctAPE.subtracted_singular_vortex_influence!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtracted_singular_vortex_influence!(node, controlpoint, cache_vec)</code></pre><p>Somewhat in-place <code>version of subtracted_singular_vortex_influence</code>.</p><p><strong>Arguments</strong></p><ul><li><code>node::Vector{Float}</code> : node position</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>cache_vec::Vector{Float}</code> : used to store intermediate values.</li></ul><p><strong>Returns</strong></p><ul><li><code>axial::Float</code> : axial direction influence</li><li><code>radial::Float</code> : radial direction influence</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L159-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.analytically_integrated_vortex_influence" href="#DuctAPE.analytically_integrated_vortex_influence"><code>DuctAPE.analytically_integrated_vortex_influence</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">analytically_integrated_vortex_influence(r, influence_length)</code></pre><p>Analytical approximation of the singular portions of the self-induced vortex panel velocities to be added back in as part of the separation of singularity method.</p><p><strong>Arguments</strong></p><ul><li><code>r::Float</code> : radial position of self-induced control point</li><li><code>influence_length::Float</code> : dimensional length of the panel</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Vector{Float}</code> : axial and radial induced velocities</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L197-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.analytically_integrated_vortex_influence!" href="#DuctAPE.analytically_integrated_vortex_influence!"><code>DuctAPE.analytically_integrated_vortex_influence!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">analytically_integrated_vortex_influence!(V, r, influence_length)</code></pre><p>In-place version of <code>analytically_integrated_vortex_influence</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L215-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_vortex_induced_velocity_sample" href="#DuctAPE.self_vortex_induced_velocity_sample"><code>DuctAPE.self_vortex_induced_velocity_sample</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_vortex_induced_velocity_sample(
    t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>Calculate the velocity induced by a linear vortex panel on a point at the midpoint between the panel edges.</p><p><strong>Arguments</strong></p><ul><li><code>t::Float</code> : sample point in range (0,1) selected by quadrature method.</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>cache_vec::Vector{Float}</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>nondimrange::Tuple=(0.0,1.0)</code> : Non-dimensional range describing the panel length.  Do not change excpet for debugging purposes. Note, can also be a vector.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : 2x2 matrix of axial and radial induced velocities from each of the nodes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L226-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_vortex_induced_velocity_sample!" href="#DuctAPE.self_vortex_induced_velocity_sample!"><code>DuctAPE.self_vortex_induced_velocity_sample!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_vortex_induced_velocity_sample!(
    V, t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>In-place version of <code>self_vortex_induced_velocity_sample</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L290-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_source_induced_velocity_sample" href="#DuctAPE.nominal_source_induced_velocity_sample"><code>DuctAPE.nominal_source_induced_velocity_sample</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_source_induced_velocity_sample(
    t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>Calculate the velocity induced by a source panel on a point.</p><p><strong>Arguments</strong></p><ul><li><code>t::Float</code> : sample point in range (0,1) selected by quadrature method.</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>cache_vec::Vector{Float}</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>nondimrange::Tuple=(0.0,1.0)</code> : Non-dimensional range describing the panel length.  Do not change excpet for debugging purposes. Note, can also be a vector.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : 2x2 matrix of axial and radial induced velocities from each of the nodes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L350-L370">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_source_induced_velocity_sample!" href="#DuctAPE.nominal_source_induced_velocity_sample!"><code>DuctAPE.nominal_source_induced_velocity_sample!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_source_induced_velocity_sample!(
    V, t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0,1.0)
)</code></pre><p>In-place version of <code>nominal_source_induced_velocity_sample</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L411-L417">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.subtracted_singular_source_influence" href="#DuctAPE.subtracted_singular_source_influence"><code>DuctAPE.subtracted_singular_source_influence</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtracted_singular_source_influence(node, controlpoint)</code></pre><p>Calculate the singular portions of the self-induced source panel influence to subtract off the integral in the separation of singularity method.</p><p><strong>Arguments</strong></p><ul><li><code>node::Vector{Float}</code> : node position</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li></ul><p><strong>Returns</strong></p><ul><li><code>axial::Float</code> : axial direction influence</li><li><code>radial::Float</code> : radial direction influence</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L459-L471">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.subtracted_singular_source_influence!" href="#DuctAPE.subtracted_singular_source_influence!"><code>DuctAPE.subtracted_singular_source_influence!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtracted_singular_source_influence!(node, controlpoint, cache_vec)</code></pre><p>In-place version of <code>subtracted_singular_source_influence</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L487-L491">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.analytically_integrated_source_influence" href="#DuctAPE.analytically_integrated_source_influence"><code>DuctAPE.analytically_integrated_source_influence</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">analytically_integrated_source_influence(r, influence_length)</code></pre><p>In-place version of <code>analytically_integrated_source_influence</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L527-L531">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.analytically_integrated_source_influence!" href="#DuctAPE.analytically_integrated_source_influence!"><code>DuctAPE.analytically_integrated_source_influence!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">analytically_integrated_source_influence(r, influence_length)</code></pre><p>Analytical approximation of the singular portions of the self-induced source panel velocities to be added back in as part of the separation of singularity method.</p><p><strong>Arguments</strong></p><ul><li><code>r::Float</code> : radial position of self-induced control point</li><li><code>influence_length::Float</code> : dimensional length of the panel</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Vector{Float}</code> : axial and radial induced velocities</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L509-L520">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_source_induced_velocity_sample" href="#DuctAPE.self_source_induced_velocity_sample"><code>DuctAPE.self_source_induced_velocity_sample</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_source_induced_velocity_sample(
    t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>Calculate the velocity induced by a linear source panel on a point at the midpoint between the panel edges.</p><p><strong>Arguments</strong></p><ul><li><code>t::Float</code> : sample point in range (0,1) selected by quadrature method.</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>cache_vec::Vector{Float}</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>nondimrange::Tuple=(0.0,1.0)</code> : Non-dimensional range describing the panel length.  Do not change excpet for debugging purposes. Note, can also be a vector.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : 2x2 matrix of axial and radial induced velocities from each of the nodes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L538-L558">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_source_induced_velocity_sample!" href="#DuctAPE.self_source_induced_velocity_sample!"><code>DuctAPE.self_source_induced_velocity_sample!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_source_induced_velocity_sample!(
    V, t, node1, node2, influence_length, controlpoint, cache_vec; nondimrange=(0.0, 1.0)
)</code></pre><p>In-place version of <code>self_source_induced_velocity_sample</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/integrands.jl#L601-L607">source</a></section></article><h4 id="Integrals"><a class="docs-heading-anchor" href="#Integrals">Integrals</a><a id="Integrals-1"></a><a class="docs-heading-anchor-permalink" href="#Integrals" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_vortex_panel_integration" href="#DuctAPE.nominal_vortex_panel_integration"><code>DuctAPE.nominal_vortex_panel_integration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_vortex_panel_integration(
    integration_options,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>Integration of vortex panel induced velocity on a point far away.</p><p><strong>Arguments</strong></p><ul><li><code>integration_options::IntegrationMethod</code> : options for itegration methods</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>containers::NamedTuple</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>debug::Bool=false</code> : if true, some methods will return the estimation error.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : velocity components due to the jth and j+1th nodes in the format: <code>[vz_j vr_j; vz_{j+1} vr_{j+1}]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/out_of_place_integrals.jl#L5-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_vortex_panel_integration!" href="#DuctAPE.nominal_vortex_panel_integration!"><code>DuctAPE.nominal_vortex_panel_integration!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_vortex_panel_integration!(
    integration_options,
    V,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>In-place version of <code>nominal_vortex_panel_integration</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/gausslegendre_integrals.jl#L5-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_vortex_panel_integration" href="#DuctAPE.self_vortex_panel_integration"><code>DuctAPE.self_vortex_panel_integration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_vortex_panel_integration(
    integration_options,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>Integration of linear vortex panel self-induced velocity.</p><p><strong>Arguments</strong></p><ul><li><code>integration_options::IntegrationMethod</code> : options for itegration methods</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>containers::NamedTuple</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>debug::Bool=false</code> : if true, some methods will return the estimation error.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : velocity components due to the jth and j+1th nodes in the format: <code>[vz_j vr_j; vz_{j+1} vr_{j+1}]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/out_of_place_integrals.jl#L55-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_vortex_panel_integration!" href="#DuctAPE.self_vortex_panel_integration!"><code>DuctAPE.self_vortex_panel_integration!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_vortex_panel_integration!(
    integration_options,
    V,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>In-place version of <code>self_vortex_panel_integration</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/gausslegendre_integrals.jl#L47-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_source_panel_integration" href="#DuctAPE.nominal_source_panel_integration"><code>DuctAPE.nominal_source_panel_integration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_source_panel_integration(
    integration_options,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>Integration of source panel induced velocity on a point far away.</p><p><strong>Arguments</strong></p><ul><li><code>integration_options::IntegrationMethod</code> : options for itegration methods</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>containers::NamedTuple</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>debug::Bool=false</code> : if true, some methods will return the estimation error.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : velocity components due to the jth and j+1th nodes in the format: <code>[vz_j vr_j; vz_{j+1} vr_{j+1}]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/out_of_place_integrals.jl#L109-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.nominal_source_panel_integration!" href="#DuctAPE.nominal_source_panel_integration!"><code>DuctAPE.nominal_source_panel_integration!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nominal_source_panel_integration!(
    integration_options,
    V,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>In-place version of <code>nominal_source_panel_integration</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/gausslegendre_integrals.jl#L100-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_source_panel_integration" href="#DuctAPE.self_source_panel_integration"><code>DuctAPE.self_source_panel_integration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_source_panel_integration(
    integration_options,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>Integration of linear source panel self-induced velocity.</p><p><strong>Arguments</strong></p><ul><li><code>integration_options::IntegrationMethod</code> : options for itegration methods</li><li><code>node1::Vector{Float}</code> : first panel node (edge) position.</li><li><code>node2::Vector{Float}</code> : second panel node (edge) position.</li><li><code>influence_length::Float</code> : dimensional length of panel.</li><li><code>controlpoint::Vector{Float}</code> : controlpoint position</li><li><code>containers::NamedTuple</code> : cache for intermediate calculations</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>debug::Bool=false</code> : if true, some methods will return the estimation error.</li></ul><p><strong>Returns</strong></p><ul><li><code>V::Matrix{Float}</code> : velocity components due to the jth and j+1th nodes in the format: <code>[vz_j vr_j; vz_{j+1} vr_{j+1}]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/out_of_place_integrals.jl#L159-L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.self_source_panel_integration!" href="#DuctAPE.self_source_panel_integration!"><code>DuctAPE.self_source_panel_integration!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">self_source_panel_integration!(
    integration_options,
    V,
    node1,
    node2,
    influence_length,
    controlpoint,
    containers;
    debug=false,
)</code></pre><p>In-place version of <code>self_source_panel_integration</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/gausslegendre_integrals.jl#L142-L155">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.extrapolate!" href="#DuctAPE.extrapolate!"><code>DuctAPE.extrapolate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extrapolate!(V, err, fh; power=2, atol=1e-6)</code></pre><p>Performs Richardson extrapolation on an array <code>fh</code> for use in Romberg integration.</p><p><strong>Arguments</strong></p><ul><li><code>V::Matrix{Float}</code> : velocity components due to the jth and j+1th nodes in the format: <code>[vz_j vr_j; vz_{j+1} vr_{j+1}]</code></li><li><code>err::Vector{Float}</code> : estimated errors in velocity approximation</li><li><code>fh::Tuple</code> : <code>(f(h), h)</code> tuples (in order of decreasing <code>|h|</code>)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/velocities/quadrature/romberg_integrals.jl#L1-L11">source</a></section></article><h2 id="State-Initialization"><a class="docs-heading-anchor" href="#State-Initialization">State Initialization</a><a id="State-Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#State-Initialization" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_velocities" href="#DuctAPE.initialize_velocities"><code>DuctAPE.initialize_velocities</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_velocities(
    solver_options::SolverOptionsType,
    operating_point,
    blade_elements,
    linsys,
    ivr,
    ivw,
    body_totnodes,
    wake_panel_sheet_be_map,
)</code></pre><p>Initialize velocity state variables.</p><p><strong>Arguments</strong></p><ul><li><code>solver_options::SolverOptionsType</code> : solver options type for dispatch</li><li><code>operating_point::OperatingPoint</code> : an OperatingPoint object</li><li><code>blade_elements::NamedTuple</code> : A named tuple containing the blade element geometry and airfoil information.</li><li><code>linsys::NamedTuple</code> : A named tuple containing the panel method linear system information.</li><li><code>ivr::NamedTuple</code> : A named tuple containing the unit induced velocities on the rotors</li><li><code>ivw::NamedTuple</code> : A named tuple containing the unit induced velocities on the wake</li><li><code>body_totnodes::Int</code> : the total number of panel nodes comprising the duct and centerbody geometry</li><li><code>wake_panel_sheet_be_map::Matrix{Int}</code> : An index map from the wake panels to the nearest ahead rotor blade element along the wake sheets</li></ul><p><strong>Returns</strong></p><ul><li><code>vz_rotor::Vector{Float}</code> : a vector of the velocity state variables associated with the rotor axially induced velocity</li><li><code>vtheta_rotor::Vector{Float}</code> : a vector of the velocity state variables associated with the rotor tangentially induced velocity</li><li><code>Cm_wake::Vector{Float}</code> : a vector of the velocity state variables associated with the wake control point meridional velocity</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/initialize_states.jl#L1-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_velocities!" href="#DuctAPE.initialize_velocities!"><code>DuctAPE.initialize_velocities!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>function initialize<em>velocities!(     solver</em>options::SolverOptionsType,     vz<em>rotor,     vtheta</em>rotor,     Cm<em>wake,     operating</em>point,     blade<em>elements,     linsys,     ivr,     ivw,     body</em>totnodes,     wake<em>panel</em>sheet<em>be</em>map, )</p><p>In-place version of <code>initialize_velocities</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/initialize_states.jl#L85-L101">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DuctAPE.initialize_strengths!" href="#DuctAPE.initialize_strengths!"><code>DuctAPE.initialize_strengths!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_strengths!(
    solver_options::SolverOptionsType,
    Gamr,
    sigr,
    gamw,
    operating_point,
    blade_elements,
    linsys,
    ivr,
    ivw,
    wakeK,
    body_totnodes,
    wake_nodemap,
    wake_endnodeidxs,
    wake_panel_sheet_be_map,
    wake_node_sheet_be_map,
    wake_node_ids_along_casing_wake_interface,
    wake_node_ids_along_centerbody_wake_interface,
)</code></pre><p>Initialize strength state variables.</p><p><strong>Arguments</strong></p><ul><li><code>solver_options::SolverOptionsType</code> : solver options type for dispatch</li><li><code>Gamr::Vector{Float}</code> : Rotor circulation state variables (modified in place)</li><li><code>sigr::Vector{Float}</code> : Rotor panel strength state variables (modified in place)</li><li><code>gamw::Vector{Float}</code> : Wake panel strength state variables (modified in place)</li><li><code>operating_point::OperatingPoint</code> : an OperatingPoint object</li><li><code>blade_elements::NamedTuple</code> : A named tuple containing the blade element geometry and airfoil information.</li><li><code>linsys::NamedTuple</code> : A named tuple containing the panel method linear system information.</li><li><code>ivr::NamedTuple</code> : A named tuple containing the unit induced velocities on the rotors</li><li><code>ivw::NamedTuple</code> : A named tuple containing the unit induced velocities on the wake</li><li><code>wakeK::Vector{Float}</code> : geometric constants of wake nodes used in calculating wake strengths</li><li><code>body_totnodes::Int</code> : the total number of panel nodes comprising the duct and centerbody geometry</li><li><code>wake_nodemap::Matrix{Int}</code> : an index map of wake panel to the associated node indices</li><li><code>wake_endnodeidxs::Matrix{Int}</code> : the node indices of the start and end of the wake sheets.</li><li><code>wake_panel_sheet_be_map::Matrix{Int}</code> : An index map from the wake panels to the nearest ahead rotor blade element along the wake sheets</li><li><code>wake_node_sheet_be_map::Matrix{Int}</code> : An index map from the wake nodes to the nearest ahead rotor blade element along the wake sheets</li><li><code>wake_node_ids_along_casing_wake_interface::type</code> : An index map indicating which wake nodes interface with the duct wall</li><li><code>wake_node_ids_along_centerbody_wake_interface::type</code> : An index map indicating which wake nodes interface with the centerbody wall</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/initialize_states.jl#L283-L324">source</a></section><section><div><pre><code class="language-julia hljs">function initialize_strengths!(
    solver_options::CSORSolverOptions,
    Gamr,
    sigr,
    gamw,
    solve_containers,
    operating_point,
    blade_elements,
    wakeK,
    wake_nodemap,
    wake_endnodeidxs,
    wake_panel_sheet_be_map,
    wake_node_sheet_be_map,
    wake_node_ids_along_casing_wake_interface,
    wake_node_ids_along_centerbody_wake_interface;
    niter=10,
    rlx=0.5,
)</code></pre><p>Refactored from DFDC SUBROUTINE ROTINITBLD</p><p>From the subroutine notes: Sets reasonable initial circulation using current rotor blade geometry (chord, beta). Initial circulations are set w/o induced effects An iteration is done using the self-induced velocity from momentum theory to converge an approximate induced axial velocity</p><p><strong>Arguments</strong></p><ul><li><code>solver_options::SolverOptionsType</code> : solver options type for dispatch</li><li><code>Gamr::Vector{Float}</code> : Rotor circulation state variables (modified in place)</li><li><code>sigr::Vector{Float}</code> : Rotor panel strength state variables (modified in place)</li><li><code>gamw::Vector{Float}</code> : Wake panel strength state variables (modified in place)</li><li><code>operating_point::OperatingPoint</code> : an OperatingPoint object</li><li><code>blade_elements::NamedTuple</code> : A named tuple containing the blade element geometry and airfoil information.</li><li><code>wakeK::Vector{Float}</code> : geometric constants of wake nodes used in calculating wake strengths</li><li><code>wake_nodemap::Matrix{Int}</code> : an index map of wake panel to the associated node indices</li><li><code>wake_endnodeidxs::Matrix{Int}</code> : the node indices of the start and end of the wake sheets.</li><li><code>wake_panel_sheet_be_map::Matrix{Int}</code> : An index map from the wake panels to the nearest ahead rotor blade element along the wake sheets</li><li><code>wake_node_sheet_be_map::Matrix{Int}</code> : An index map from the wake nodes to the nearest ahead rotor blade element along the wake sheets</li><li><code>wake_node_ids_along_casing_wake_interface::type</code> : An index map indicating which wake nodes interface with the duct wall</li><li><code>wake_node_ids_along_centerbody_wake_interface::type</code> : An index map indicating which wake nodes interface with the centerbody wall</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>rlx::Float=0.5</code> : factor for under-relaxation to reduce transients in CL</li></ul><p><strong>Returns</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/DuctAPE.jl/blob/c6afc1a17113d5e6d69103e60bf4edf7713ce8a6/src/preprocess/initialize_states.jl#L547-L596">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../private_prelims/">« Prelims</a><a class="docs-footer-nextpage" href="../private_process/">Process »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 21 February 2025 16:31">Friday 21 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
